require=function e(n,t,r){function i(u,a){if(!t[u]){if(!n[u]){var c="function"==typeof require&&require;if(!a&&c)return c(u,!0);if(o)return o(u,!0);throw new Error("Cannot find module '"+u+"'")}var s=t[u]={exports:{}};n[u][0].call(s.exports,function(e){var t=n[u][1][e];return i(t?t:e)},s,s.exports,e,n,t,r)}return t[u].exports}for(var o="function"==typeof require&&require,u=0;u<r.length;u++)i(r[u]);return i}({"Focm2+":[function(e,n,t){t.MemoryDb=e("./lib/MemoryDb"),t.utils=e("./lib/utils")},{"./lib/MemoryDb":6,"./lib/utils":8}],minimongo:[function(e,n){n.exports=e("Focm2+")},{}],jquery:[function(e,n){n.exports=e("/nayFu")},{}],"/nayFu":[function(e,n){n.exports=window.$},{}],5:[function(e,n){var t=e("lodash");EJSON={};var r={};EJSON.addType=function(e,n){if(t.has(r,e))throw new Error("Type "+e+" already present");r[e]=n};var i=[{matchJSONValue:function(e){return t.has(e,"$date")&&1===t.size(e)},matchObject:function(e){return e instanceof Date},toJSONValue:function(e){return{$date:e.getTime()}},fromJSONValue:function(e){return new Date(e.$date)}},{matchJSONValue:function(e){return t.has(e,"$binary")&&1===t.size(e)},matchObject:function(e){return"undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&t.has(e,"$Uint8ArrayPolyfill")},toJSONValue:function(e){return{$binary:EJSON._base64Encode(e)}},fromJSONValue:function(e){return EJSON._base64Decode(e.$binary)}},{matchJSONValue:function(e){return t.has(e,"$escape")&&1===t.size(e)},matchObject:function(e){return t.isEmpty(e)||t.size(e)>2?!1:t.any(i,function(n){return n.matchJSONValue(e)})},toJSONValue:function(e){var n={};return t.each(e,function(e,t){n[t]=EJSON.toJSONValue(e)}),{$escape:n}},fromJSONValue:function(e){var n={};return t.each(e.$escape,function(e,t){n[t]=EJSON.fromJSONValue(e)}),n}},{matchJSONValue:function(e){return t.has(e,"$type")&&t.has(e,"$value")&&2===t.size(e)},matchObject:function(e){return EJSON._isCustomType(e)},toJSONValue:function(e){return{$type:e.typeName(),$value:e.toJSONValue()}},fromJSONValue:function(e){var n=e.$type,t=r[n];return t(e.$value)}}];EJSON._isCustomType=function(e){return e&&"function"==typeof e.toJSONValue&&"function"==typeof e.typeName&&t.has(r,e.typeName())};var o=EJSON._adjustTypesToJSONValue=function(e){if(null===e)return null;var n=u(e);return void 0!==n?n:(t.each(e,function(n,t){if("object"==typeof n||void 0===n){var r=u(n);return r?(e[t]=r,void 0):(o(n),void 0)}}),e)},u=function(e){for(var n=0;n<i.length;n++){var t=i[n];if(t.matchObject(e))return t.toJSONValue(e)}return void 0};EJSON.toJSONValue=function(e){var n=u(e);return void 0!==n?n:("object"==typeof e&&(e=EJSON.clone(e),o(e)),e)};var a=EJSON._adjustTypesFromJSONValue=function(e){if(null===e)return null;var n=c(e);return n!==e?n:(t.each(e,function(n,t){if("object"==typeof n){var r=c(n);if(n!==r)return e[t]=r,void 0;a(n)}}),e)},c=function(e){if("object"==typeof e&&null!==e&&t.size(e)<=2&&t.all(e,function(e,n){return"string"==typeof n&&"$"===n.substr(0,1)}))for(var n=0;n<i.length;n++){var r=i[n];if(r.matchJSONValue(e))return r.fromJSONValue(e)}return e};EJSON.fromJSONValue=function(e){var n=c(e);return n===e&&"object"==typeof e?(e=EJSON.clone(e),a(e),e):n},EJSON.stringify=function(e){return JSON.stringify(EJSON.toJSONValue(e))},EJSON.parse=function(e){return EJSON.fromJSONValue(JSON.parse(e))},EJSON.isBinary=function(e){return"undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&e.$Uint8ArrayPolyfill},EJSON.equals=function(e,n,r){var i,o=!(!r||!r.keyOrderSensitive);if(e===n)return!0;if(!e||!n)return!1;if("object"!=typeof e||"object"!=typeof n)return!1;if(e instanceof Date&&n instanceof Date)return e.valueOf()===n.valueOf();if(EJSON.isBinary(e)&&EJSON.isBinary(n)){if(e.length!==n.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==n[i])return!1;return!0}if("function"==typeof e.equals)return e.equals(n,r);if(e instanceof Array){if(!(n instanceof Array))return!1;if(e.length!==n.length)return!1;for(i=0;i<e.length;i++)if(!EJSON.equals(e[i],n[i],r))return!1;return!0}var u;if(o){var a=[];return t.each(n,function(e,n){a.push(n)}),i=0,u=t.all(e,function(e,t){return i>=a.length?!1:t!==a[i]?!1:EJSON.equals(e,n[a[i]],r)?(i++,!0):!1}),u&&i===a.length}return i=0,u=t.all(e,function(e,o){return t.has(n,o)?EJSON.equals(e,n[o],r)?(i++,!0):!1:!1}),u&&t.size(n)===i},EJSON.clone=function(e){var n;if("object"!=typeof e)return e;if(null===e)return null;if(e instanceof Date)return new Date(e.getTime());if(EJSON.isBinary(e)){n=EJSON.newBinary(e.length);for(var r=0;r<e.length;r++)n[r]=e[r];return n}if(t.isArray(e)||t.isArguments(e)){for(n=[],r=0;r<e.length;r++)n[r]=EJSON.clone(e[r]);return n}return"function"==typeof e.clone?e.clone():(n={},t.each(e,function(e,t){n[t]=EJSON.clone(e)}),n)},n.exports=EJSON},{lodash:"nJZoxB"}],6:[function(e,n){var t,r,i,o,u,a,c,s=[].slice;c=e("lodash"),a=e("./utils"),u=e("./utils").processFind,o=e("./utils").processAggregate,i=e("./selector").compileSort,n.exports=r=function(){function e(e,n){this.collections={},n&&n(this)}return e.prototype.addCollection=function(e,n){var r;return r=new t(e),this[e]=r,this.collections[e]=r,null!=n?n():void 0},e.prototype.createCollection=function(e,n){var r;return r=new t(e),this[e]=r,this.collections[e]=r,null!=n?n():void 0},e.prototype.removeCollection=function(e,n){return delete this[e],delete this.collections[e],null!=n?n():void 0},e}(),t=function(){function e(e){this.name=e,this.items={},this.founds={},this.updates={},this.upserts={},this.removes={}}return e.prototype.find=function(e,n){return this._findFetch(e,n)},e.prototype.findOne=function(e,n,t,r){var i,o;return c.isFunction(n)&&(o=[{},n,t],n=o[0],t=o[1],r=o[2]),i=this.find(e,n),i?i[0]:null},e.prototype._findFetch=function(e,n){return u(this.items,e,n)},e.prototype.upsert=function(e,n,t,r){var i,o,u,s,l;for(l=a.regularizeUpsert(e,n,t,r),o=l[0],t=l[1],r=l[2],u=0,s=o.length;s>u;u++)i=o[u],void 0===i.base&&(i.base=this.upserts[i.doc._id]?this.upserts[i.doc._id].base:this.items[i.doc._id]||null),i=c.cloneDeep(i),this.items[i.doc._id]=i.doc,this.upserts[i.doc._id]=i;return t?t(e):void 0},e.prototype.insert=function(e,n,t,r){var i,o,u,s,l;if(c.isEmpty(e)&&"object"!=typeof e||"string"==typeof e)throw{message:"Error: no object passed to insert"};for(l=a.regularizeUpsert(e,n,t,r),o=l[0],t=l[1],r=l[2],u=0,s=o.length;s>u;u++){if(i=o[u],void 0===i.base&&(i.base=this.items[i.doc._id]||null),i=c.cloneDeep(i),this.items[i.doc._id])throw"Duplicate ID";this.items[i.doc._id]=i.doc}return null},e.prototype.update=function(e,n,t){var r,i;if(c.isEmpty(e)&&c.isEmpty(n)&&"object"!=typeof e&&"object"!=typeof n||!n)throw{message:"Error: no object passed to update"};return i=u(this.items,e),r=this,c.map(c.keys(i),function(e){return r.founds[i[e]._id]=n}),c.isEmpty(n)?void 0:a.processUpdate(i,e,n,t,this)},e.prototype.aggregate=function(){var e,n,t,r,i;if(t=1<=arguments.length?s.call(arguments,0):[],e=[],t.length>1){for(r=0,i=t.length;i>r;r++)n=t[r],e.push(n);t=e}else t=t[0];return o(this.items,t)},e.prototype.remove=function(e,n){var t,r,i,o,a,s;for(t=u(this.items,e,n),i=c.collect(t,"_id"),s=[],o=0,a=i.length;a>o;o++)r=i[o],this.removes[r]=this.items[r],s.push(this.items=c.omit(this.items,r));return s},e.prototype.cache=function(e,n,t,r,o){var u,a,s,l,f;for(l=0,f=e.length;f>l;l++)u=e[l],this.cacheOne(u);return a=c.object(c.pluck(e,"_id"),e),t.sort&&(s=i(t.sort)),this.find(n,t).fetch(function(n){return function(i){var o,u,l;for(u=0,l=i.length;l>u;u++)if(o=i[u],!a[o._id]&&!c.has(n.upserts,o._id)){if(t.sort&&t.limit&&e.length===t.limit&&s(o,c.last(e))>=0)continue;delete n.items[o._id]}return null!=r?r():void 0}}(this),o)},e.prototype.pendingUpserts=function(e){return e(c.values(this.upserts))},e.prototype.pendingRemoves=function(e){return e(c.pluck(this.removes,"_id"))},e.prototype.resolveUpserts=function(e,n){var t,r,i,o;for(i=0,o=e.length;o>i;i++)r=e[i],t=r.doc._id,this.upserts[t]&&(c.isEqual(r.doc,this.upserts[t].doc)?delete this.upserts[t]:this.upserts[t].base=r.doc);return null!=n?n():void 0},e.prototype.resolveRemove=function(e,n){return delete this.removes[e],null!=n?n():void 0},e.prototype.seed=function(e,n){var t,r,i;for(c.isArray(e)||(e=[e]),r=0,i=e.length;i>r;r++)t=e[r],c.has(this.items,t._id)||c.has(this.removes,t._id)||(this.items[t._id]=t);return null!=n?n():void 0},e.prototype.cacheOne=function(e,n){var t;return c.has(this.upserts,e._id)||c.has(this.removes,e._id)||(t=this.items[e._id],(!t||!e._rev||!t._rev||e._rev>=t._rev)&&(this.items[e._id]=e)),null!=n?n():void 0},e}()},{"./selector":7,"./utils":8,lodash:"nJZoxB"}],7:[function(e,n,t){LocalCollection={},EJSON=e("./EJSON");var r=e("lodash"),i=function(e){return r.isArray(e)&&!EJSON.isBinary(e)},o=function(e,n){return i(e)?r.any(e,n):n(e)},u=function(e,n){return n(e)?!0:i(e)&&r.any(e,n)},a=function(e){var n=void 0;for(var t in e){var r="$"===t.substr(0,1);if(void 0===n)n=r;else if(n!==r)throw new Error("Inconsistent selector: "+e)}return!!n},c=function(e){if(null==e)return function(e){return o(e,function(e){return null==e})};if(!r.isObject(e))return function(n){return o(n,function(n){return n===e})};if(e instanceof RegExp)return function(n){return void 0===n?!1:o(n,function(n){return e.test(n)})};if(i(e))return function(n){return i(n)?u(n,function(n){return LocalCollection._f._equal(e,n)}):!1};if(a(e)){var n=[];return r.each(e,function(t,i){if(!r.has(l,i))throw new Error("Unrecognized operator: "+i);n.push(l[i](t,e.$options))}),function(e){return r.all(n,function(n){return n(e)})}}return function(n){return o(n,function(n){return LocalCollection._f._equal(e,n)})}},s={$and:function(e){if(!i(e)||r.isEmpty(e))throw Error("$and/$or/$nor must be nonempty array");var n=r.map(e,f);return function(e){return r.all(n,function(n){return n(e)})}},$or:function(e){if(!i(e)||r.isEmpty(e))throw Error("$and/$or/$nor must be nonempty array");var n=r.map(e,f);return function(e){return r.any(n,function(n){return n(e)})}},$nor:function(e){if(!i(e)||r.isEmpty(e))throw Error("$and/$or/$nor must be nonempty array");var n=r.map(e,f);return function(e){return r.all(n,function(n){return!n(e)})}},$where:function(e){return e instanceof Function||(e=Function("return "+e)),function(n){return e.call(n)}}},l={$group:function(e){if(!i(e))throw new Error("Argument to $in must be array");return function(n){return u(n,function(n){return r.any(e,function(e){return LocalCollection._f._equal(e,n)})})}},$match:function(e){if(!i(e))throw new Error("Argument to $in must be array");return function(n){return u(n,function(n){return r.any(e,function(e){return LocalCollection._f._equal(e,n)})})}},$in:function(e){if(!i(e))throw new Error("Argument to $in must be array");return function(n){return u(n,function(n){return r.any(e,function(e){return LocalCollection._f._equal(e,n)})})}},$all:function(e){if(!i(e))throw new Error("Argument to $all must be array");return function(n){return i(n)?r.all(e,function(e){return r.any(n,function(n){return LocalCollection._f._equal(e,n)})}):!1}},$lt:function(e){return function(n){return o(n,function(n){return LocalCollection._f._cmp(n,e)<0})}},$lte:function(e){return function(n){return o(n,function(n){return LocalCollection._f._cmp(n,e)<=0})}},$gt:function(e){return function(n){return o(n,function(n){return LocalCollection._f._cmp(n,e)>0})}},$gte:function(e){return function(n){return o(n,function(n){return LocalCollection._f._cmp(n,e)>=0})}},$ne:function(e){return function(n){return!u(n,function(n){return LocalCollection._f._equal(n,e)})}},$nin:function(e){if(!i(e))throw new Error("Argument to $nin must be array");var n=l.$in(e);return function(e){return void 0===e?!0:!n(e)}},$exists:function(e){return function(n){return e===(void 0!==n)}},$mod:function(e){var n=e[0],t=e[1];return function(e){return o(e,function(e){return e%n===t})}},$size:function(e){return function(n){return i(n)&&e===n.length}},$type:function(e){return function(n){return void 0===n?!1:o(n,function(n){return LocalCollection._f._type(n)===e})}},$regex:function(e,n){if(void 0!==n){if(/[^gim]/.test(n))throw new Error("Only the i, m, and g regexp options are supported");var t=e instanceof RegExp?e.source:e;e=new RegExp(t,n)}else e instanceof RegExp||(e=new RegExp(e));return function(n){return void 0===n?!1:o(n,function(n){return e.test(n)})}},$options:function(){return function(){return!0}},$elemMatch:function(e){if(r.isEmpty(e))return function(){return!1};var n=f(e);return function(e){return i(e)?r.any(e,function(e){return n(e)}):!1}},$not:function(e){var n=c(e);return function(e){return!n(e)}},$near:function(){return function(){return!0}},$geoIntersects:function(){return function(){return!0}}};LocalCollection._f={_type:function(e){return"number"==typeof e?1:"string"==typeof e?2:"boolean"==typeof e?8:i(e)?4:null===e?10:e instanceof RegExp?11:"function"==typeof e?13:e instanceof Date?9:EJSON.isBinary(e)?5:3},_equal:function(e,n){return EJSON.equals(e,n,{keyOrderSensitive:!0})},_typeorder:function(e){return[-1,1,2,3,4,5,-1,6,7,8,0,9,-1,100,2,100,1,8,1][e]},_cmp:function(e,n){if("object"==typeof e)return-1;if(void 0===e)return void 0===n?0:-1;if(void 0===n)return 1;var t=LocalCollection._f._type(e),r=LocalCollection._f._type(n),i=LocalCollection._f._typeorder(t),o=LocalCollection._f._typeorder(r);if(i!==o)return o>i?-1:1;if(t!==r)throw Error("Missing type coercion logic in _cmp");if(7===t&&(t=r=2,e=e.toHexString(),n=n.toHexString()),9===t&&(t=r=1,e=e.getTime(),n=n.getTime()),1===t)return e-n;if(2===r)return n>e?-1:e===n?0:1;if(3===t){var u=function(e){var n=[];for(var t in e)n.push(t),n.push(e[t]);return n};return LocalCollection._f._cmp(u(e),u(n))}if(4===t)for(var a=0;;a++){if(a===e.length)return a===n.length?0:-1;if(a===n.length)return 1;var c=LocalCollection._f._cmp(e[a],n[a]);if(0!==c)return c}if(5===t){if(e.length!==n.length)return e.length-n.length;for(a=0;a<e.length;a++){if(e[a]<n[a])return-1;if(e[a]>n[a])return 1}return 0}if(8===t)return e?n?0:1:n?-1:0;if(10===t)return 0;if(11===t)throw Error("Sorting not supported on regular expression");if(13===t)throw Error("Sorting not supported on Javascript code");throw Error("Unknown type to sort")}},LocalCollection._matches=function(e,n){return LocalCollection._compileSelector(e)(n)},LocalCollection._makeLookupFunction=function(e){var n,t,o,u=e.indexOf(".");if(-1===u)n=e;else{n=e.substr(0,u);var a=e.substr(u+1);t=LocalCollection._makeLookupFunction(a),o=/^\d+(\.|$)/.test(a)}return function(e){if(null==e)return[void 0];var u=e[n];return t?i(u)&&0===u.length?[void 0]:((!i(u)||o)&&(u=[u]),Array.prototype.concat.apply([],r.map(u,t))):[u]}};var f=function(e){var n=[];return r.each(e,function(e,t){if("$"===t.substr(0,1))if(r.has(l,t))n.push(l[t](e));else{if(!r.has(s,t))throw new Error("Unrecognized logical operator: "+t);n.push(s[t](e))}else{var i=LocalCollection._makeLookupFunction(t),o=c(e);n.push(function(e){var n=i(e);return r.any(n,o)})}}),function(e){return r.all(n,function(n){return n(e)})}};LocalCollection._compileSelector=function(e){if(e instanceof Function)return function(n){return e.call(n)};if(LocalCollection._selectorIsId(e))return function(n){return EJSON.equals(n._id,e)};if(!e||"_id"in e&&!e._id)return function(){return!1};if("boolean"==typeof e||i(e)||EJSON.isBinary(e))throw new Error("Invalid selector: "+e);return f(e)},LocalCollection._compileSort=function(e){var n=[];if(e instanceof Array)for(var t=0;t<e.length;t++)"string"==typeof e[t]?n.push({lookup:LocalCollection._makeLookupFunction(e[t]),ascending:!0}):n.push({lookup:LocalCollection._makeLookupFunction(e[t][0]),ascending:"desc"!==e[t][1]});else{if("object"!=typeof e)throw Error("Bad sort specification: ",JSON.stringify(e));for(var o in e)n.push({lookup:LocalCollection._makeLookupFunction(o),ascending:e[o]>=0})}if(0===n.length)return function(){return 0};var u=function(e,n){var t,o=!0;return r.each(e,function(e){i(e)||(e=[e]),i(e)&&0===e.length&&(e=[void 0]),r.each(e,function(e){if(o)t=e,o=!1;else{var r=LocalCollection._f._cmp(t,e);(n&&r>0||!n&&0>r)&&(t=e)}})}),t};return function(e,t){for(var r=0;r<n.length;++r){var i=n[r],o=u(i.lookup(e),i.ascending),a=u(i.lookup(t),i.ascending),c=LocalCollection._f._cmp(o,a);if(0!==c)return i.ascending?c:-c}return 0}},t.compileDocumentSelector=f,t.compileSort=LocalCollection._compileSort},{"./EJSON":5,lodash:"nJZoxB"}],8:[function(e,n,t){var r,i,o,u,a,c,s,l,f,p,d,h,m;m=e("lodash"),o=e("async"),u=e("bowser"),r=e("sorted-object-array"),a=e("./selector").compileDocumentSelector,c=e("./selector").compileSort,f=function(){var e;if(!window.localStorage)return!1;try{return window.localStorage.setItem("test","test"),window.localStorage.removeItem("test"),!0}catch(n){return e=n,!1}},t.compileDocumentSelector=a,t.autoselectLocalDb=function(n,t){var r,i;return r=e("./MemoryDb"),i=u.browser,new r(n,t)},t.migrateLocalDb=function(){},t.processUpdate=function(e,n,r,i,o){var u,a,c,s,l,f,p,d,h;for(i&&i.upsert&&e.length<1&&(m.include(Object.keys(r),"$set")?o.insert(m.merge(n,r.$set)):Object.keys(r)[0].indexOf("$")>=0?o.insert(m.merge(n,r[Object.keys(r)[0]])):o.insert(m.merge(n,r)),o.upserts[r._id]=r),i&&i.multi||e.length<1||(e=[m.first(e)]),f=0,p=e.length;p>f;f++){if(c=e[f],void 0===c.docs&&(c.doc=r),void 0===c.base&&(c.base=o.items[c.doc._id]||null),c=m.cloneDeep(c),u=!0,m.include(Object.keys(r),"$inc")){u=!1,o.updates[c._id]=r,d=r.$inc;for(s in d)l=d[s],o.items[c._id][s]=o.items[c._id][s]+l}if(m.include(Object.keys(r),"$set")&&(u=t.update$set(n,o,r,c)),m.include(Object.keys(r),"$unset")&&(u=t.update$unset(o,r,c)),m.include(Object.keys(r),"$rename")){o.updates[c._id]=r,u=!1,h=r.$rename;for(s in h)l=h[s],o.items[c._id][l]=o.items[c._id][s],o.items[c._id]=m.omit(o.items[c._id],s)}if(m.include(Object.keys(r),"$max")&&(u=t.update$max(o,r,c)),m.include(Object.keys(r),"$min")&&(u=t.update$min(o,r,c)),m.include(Object.keys(r),"$mul")&&(u=t.update$mul(o,r,c)),m.include(Object.keys(r),"$addToSet")&&(u=t.update$addToSet(o,r,c)),m.include(Object.keys(r),"$push")&&(u=t.update$push(o,r,c)),u){o.updates[c._id]=r;for(s in r)l=r[s],a=o.items[c._id]._id,o.items[c._id]=r;o.items[c._id]._id=a}}return""},t.update$push=function(e,n,t){var r,i,o,u,a;r=!1,i=!1,a=n.$push;for(o in a)u=a[o],e.items[t._id][o]&&(i=!0,e.items[t._id][o].push(u));return i&&(e.updates[t._id]=n),r},t.update$addToSet=function(e,n,t){var r,i,o,u,a;r=!1,i=!1,a=n.$addToSet;for(o in a)u=a[o],e.items[t._id][o]&&!m.include(e.items[t._id][o],u)&&(i=!0,e.items[t._id][o].push(u));return i&&(e.updates[t._id]=n),r},t.update$unset=function(e,n,t){var r,i,o,u,a;r=!1,i=!1,a=n.$unset;for(o in a)u=a[o],e.items[t._id][o]&&(i=!0),e.items[t._id]=m.omit(e.items[t._id],o);return i&&(e.updates[t._id]=n),r},t.update$set=function(e,n,t,r){var i,o,u,a,c,s,l;n.updates[r._id]=t,o=!1,l=t.$set;for(a in l)if(s=l[a],c=a.split("."),"$"===c[c.length-1])i=n.items[r._id][c[0]],u=i.indexOf(m.values(e)[0]),n.items[r._id][c[0]][u]=m.values(t.$set)[0];else if(isNaN(c[c.length-1])){if(!n.items[r._id][a]&&m.include(a,"$"))throw{message:"The dollar ($) prefixed field "+a+" in "+a+" is not valid for storage."};n.items[r._id][a]=s}else i=n.items[r._id][c[0]],u=parseInt(c[c.length-1]),n.items[r._id][c[0]][u]=s;return o},t.update$max=function(e,n,r){var i,o,u,a,c,s,l;o=!1,u=!1,l=n.$max;for(a in l)if(s=l[a],m.include(a,"."))c=t.prepareDot(a),i=t.convertDot(r,c[0])[c[1]],s>i&&(t.convertDot(r,c[0])[c[1]]=s,e.items[r._id]=m.omit(r,"doc","base"),u=!0);else{if(!e.items[r._id][a]&&m.include(a,"$"))throw{message:"The dollar ($) prefixed field "+a+" in "+a+" is not valid for storage."};e.items[r._id][a]<s&&(e.items[r._id][a]=s,u=!0)}return u&&(e.updates[r._id]=n),o},t.update$min=function(e,n,r){var i,o,u,a,c,s,l;e.updates[r._id]=n,o=!1,u=!1,l=n.$min;for(a in l)if(s=l[a],m.include(a,"."))c=t.prepareDot(a),i=t.convertDot(r,c[0])[c[1]],i>s&&(t.convertDot(r,c[0])[c[1]]=s,e.items[r._id]=m.omit(r,"doc","base"),u=!0);else{if(!e.items[r._id][a]&&m.include(a,"$"))throw{message:"The dollar ($) prefixed field "+a+" in "+a+" is not valid for storage."};e.items[r._id][a]>s&&(e.items[r._id][a]=s,u=!0)}return u&&(e.updates[r._id]=n),o},t.update$mul=function(e,n,r){var i,o,u,a,c;e.updates[r._id]=n,i=!1,c=n.$mul;for(o in c)if(a=c[o],m.include(o,"."))u=t.prepareDot(o),t.convertDot(r,u[0])[u[1]]=t.convertDot(r,u[0])[u[1]]*a,e.items[r._id]=m.omit(r,"doc","base");else{if(!e.items[r._id][o]&&m.include(o,"$"))throw{message:"The dollar ($) prefixed field "+o+" in "+o+" is not valid for storage."};e.items[r._id][o]=e.items[r._id][o]*a}return i},t.prepareDot=function(e){var n,t,r;return n=e.split("."),t=n.pop(),r=n.join("."),[r,t]},t.convertDot=function(e,n,r){return"string"==typeof n?t.convertDot(e,n.split("."),r):1===n.length&&void 0!==r?e[n[0]]=r:0===n.length?e:t.convertDot(e[n[0]],n.slice(1),r)},t.processFind=function(e,n,r){var o,u;return m.isArray(n)?[]:(o=m.filter(m.values(e),a(n)),o=h(n,o),o=d(n,o),o=r?t.filterFields(o,r):m.map(o,function(e){return m.cloneDeep(e)}),u=o,o.skip=function(e){var n;return u.preLimit?(u.preLimit.splice(0,e),n=u.preLimit):(u.splice(0,e),n=u),i(n)},o.limit=function(e){var n;return n=i(u.slice(0,e)),n.preLimit=o,n},o.sort=function(e){var n,t;if(n=e[Object.keys(e)[0]],t=i(m.sortBy(u,Object.keys(e)[0])),-1===n)t=t.reverse();else{if(1!==n&&!m.isEmpty(Object.keys(e)))throw{message:"BadValue bad sort specification"};t=t}return t},o.count=function(){return m.size(u)},o)},i=function(e){var n;return n=e,n.skip=function(e){var t;return n.preLimit?(n.preLimit.splice(0,e),t=n.preLimit):(n.splice(0,e),t=n),i(t)},n.limit=function(t){var r;return r=i(n.slice(0,t)),r.preLimit=e,r},n.sort=function(e){var t,r;return t=e[Object.keys(e)[0]],r=i(m.sortBy(n,Object.keys(e)[0])),0>t&&(r=r.reverse()),r},e.count=function(){return m.size(n)},n},t.convertToObject=function(e){var n,t,r,i,o;if(e.constructor!==Array)return e;for(t={},i=0,o=e.length;o>i;i++)r=e[i],n=Object.keys(r)[0],t[n]=r[n];return t},t.aggregateGroup=function(e,n,r){var i,o,u,a,c,s,l,f,p,d,h,v,y,g,b,_,$,w;if(f=[],y=e,c=m.keys(r.$group),p=m.values(r.$group),v=null,!m.include(c,"_id"))throw{message:"_id field was not supplied"};for(h=0,_=y.length;_>h;h++)for(a=y[h],o={},i=0,g=0,$=c.length;$>g;g++){if(u=c[g],"string"==typeof p[i]){for("_id"===u&&(v=p[i].replace("$","")),o[u]=t.compileDollar(a,p[i]),l=!1,b=0,w=f.length;w>b;b++)d=f[b],m.include(m.values(d),o._id)&&(l=!0);l||f.push(o)}else{if("object"!=typeof p[i])return[{_id:p[i]}];s=Object.keys(p[i])[0],"$max"===s&&t.aggregateMax(p,f,y,i,v,u),"$min"===s&&t.aggregateMin(p,f,y,i,v,u),"$sum"===s?t.aggregateAdd(p,f,y,i,v,u):"$avg"===s&&t.aggregateAvg(p,f,y,i,v,u)}i+=1}return e=f},t.compileDollar=function(e,n){var t;return m.include(n,"$")?m.include(n,".")?(t=n.replace("$","").split("."),e[t[0]][t[1]]):e[n.replace("$","")]:n},t.processOperation=function(e,n){var t,r,i;if("number"==typeof n)return n;if(m.include(n,".")){if(r=n.replace("$","").split("."),!e[r[0]])return null;i=e[r[0]][r[1]]}else m.include(n,"$")&&(i=e[n.replace("$","")]||e[n]);return"object"==typeof i?(t=n.replace("$","").split("."),e[n][t[1]]):"string"==typeof i||"number"==typeof i?i:void 0},t.aggregateMax=function(e,n,r,i,o,u){var a,c,s,l,f,p,d,h,m,v;for(l=Object.keys(e[i]),f=e[i][l],v=[],p=0,h=n.length;h>p;p++){for(a=n[p],s=0,d=0,m=r.length;m>d;d++)c=r[d],t.checkIfMatch(a,c,o,f)&&s<t.processOperation(c,f)&&(s=t.processOperation(c,f));v.push(a[u]=s)}return v},t.aggregateMin=function(e,n,r,i,o,u){var a,c,s,l,f,p,d,h,m,v;for(l=Object.keys(e[i]),f=e[i][l],v=[],p=0,h=n.length;h>p;p++){for(a=n[p],s=null,d=0,m=r.length;m>d;d++)c=r[d],t.checkIfMatch(a,c,o,f)&&(s||(s=t.processOperation(c,f)),s>t.processOperation(c,f)&&(s=t.processOperation(c,f)));v.push(a[u]=s)}return v},t.aggregateAdd=function(e,n,r,i,o,u){var a,c,s,l,f,p,d,h,m,v;for(s=Object.keys(e[i]),f=e[i][s],v=[],p=0,h=n.length;h>p;p++){for(a=n[p],l=0,d=0,m=r.length;m>d;d++)c=r[d],t.checkIfMatch(a,c,o,f)&&(l+=t.processOperation(c,f));v.push(a[u]=l)}return v},t.aggregateAvg=function(e,n,r,i,o,u){var a,c,s,l,f,p,d,h,m,v;for(l=Object.keys(e[i]),p=e[i][l],d=0,m=n.length;m>d;d++){for(a=n[d],f=0,s=0,h=0,v=r.length;v>h;h++)c=r[h],t.checkIfMatch(a,c,o,p)&&(f+=t.processOperation(c,p),s+=1);1>f&&(s=1),a[u]=f/s}return n},t.aggregateSort=function(e,n){var t,r,i;return r=e.$sort[Object.keys(e.$sort)[0]],i=Object.keys(e.$sort)[0].replace("$",""),t=function(e,n){return e[i]<n[i]?-1:e[i]>n[i]?1:0},n=n.sort(t),0>r&&(n=n.reverse()),n},t.checkIfMatch=function(e,n,r,i){return e._id===t.processOperation(n,r)||r===e._id||n[r]===e._id&&("number"==typeof i||m.include(i,"$"))},t.aggregateProject=function(e,n){var t,r,i,o,u,a,c,s,l,f,p,d,h;for(u=Object.keys(e.$project),i=[],c=0,f=u.length;f>c;c++)r=u[c],e.$project[r]&&i.push(r);for(e.$project._id&&i.push("_id"),h=[],s=0,p=n.length;p>s;s++){for(t=n[s],a={},l=0,d=i.length;d>l;l++)o=i[l],t[o]||t[o.replace("$","")]?t[o.replace("$","")]&&(a[o.replace("$","")]=t[o.replace("$","")]):(r=o.split("."),a[r[0]]=t[r[0]]);h.push(a)}return n=h},t.throwPipelineOperators=function(e){if(m.intersection(["$match","$project","$group","$limit","$sort","$skip"],Object.keys(e)).length<1)throw m.intersection(["match","project","group","limit","sort","skip"],Object.keys(e)).length>0?{message:"The pipeline operator "+Object.keys(e)[0]+" requires a $ in front."}:{message:"This pipeline operator is not supported with this browser version of MongoDB"}},t.processAggregate=function(e,n,r){var i,o,u,c;for(m.isArray(n)||(n=[n]),i=m.values(e),u=0,c=n.length;c>u;u++)o=n[u],t.throwPipelineOperators(o),o.$match&&(i=m.filter(i,a(o.$match))),o.$project&&(i=t.aggregateProject(o,i)),o.$group&&(i=t.aggregateGroup(i,e,o,r)),o.$limit&&(i=i.slice(0,o.$limit)),o.$sort&&(i=t.aggregateSort(o,i)),o.$skip&&i.splice(0,o.$skip);return i},t.filterFields=function(e,n){return null==n&&(n={}),0===m.keys(n).length?e:m.map(e,function(e){var t,r,i,o,u,a,c,s,l,f,p,d,h,v,y,g,b,_,$,w,k;if(e=m.cloneDeep(e),o={},m.include(m.values(n),1)||m.include(m.values(n),!0)){for(m.include(m.keys(n),"_id")&&!n._id?(t=m.keys(n),n._id=!1):(t=m.keys(n).concat(["_id"]),n._id=!0),l=0,h=t.length;h>l;l++){for(r=t[l],a=r.split("."),u=e,f=0,v=a.length;v>f;f++)c=a[f],u&&(u=u[c]);if(null!=u){for(i=e,s=o,$=m.initial(a),p=0,y=$.length;y>p;p++)c=$[p],s[c]=s[c]||{},s=s[c],i=i[c];n[r]&&(s[m.last(a)]=i[m.last(a)])}}return o}for(w=m.keys(n),d=0,g=w.length;g>d;d++){for(r=w[d],a=r.split("."),u=e,k=m.initial(a),_=0,b=k.length;b>_;_++)c=k[_],u&&(u=u[c]);null!=u&&delete u[m.last(a)]}return e})},t.createUid=function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var n,t;return n=16*Math.random()|0,t="x"===e?n:3&n|8,t.toString(16)})},h=function(e,n){var t,r,i,o;for(i in e)if(o=e[i],null!=o&&o.$near){if(r=o.$near.$geometry,"Point"!==r.type)break;n=m.filter(n,function(e){return e[i]&&"Point"===e[i].type}),t=m.map(n,function(e){return{doc:e,distance:l(r.coordinates[1],r.coordinates[0],e[i].coordinates[1],e[i].coordinates[0])}}),t=m.filter(t,function(e){return e.distance>=0}),t=m.sortBy(t,"distance"),o.$near.$maxDistance&&(t=m.filter(t,function(e){return e.distance<=o.$near.$maxDistance})),n=m.pluck(t,"doc")}return n},p=function(e,n){if(!m.isEqual(m.first(n.coordinates[0]),m.last(n.coordinates[0])))throw new Error("First must equal last");return e.coordinates[0]<Math.min.apply(this,m.map(n.coordinates[0],function(e){return e[0]}))?!1:e.coordinates[1]<Math.min.apply(this,m.map(n.coordinates[0],function(e){return e[1]}))?!1:e.coordinates[0]>Math.max.apply(this,m.map(n.coordinates[0],function(e){return e[0]}))?!1:e.coordinates[1]>Math.max.apply(this,m.map(n.coordinates[0],function(e){return e[1]}))?!1:!0},l=function(e,n,t,r){var i,o,u,a,c,l;return i=6370986,c=s(t-e),l=s(r-n),o=Math.sin(c/2)*Math.sin(c/2)+Math.cos(s(e))*Math.cos(s(t))*Math.sin(l/2)*Math.sin(l/2),u=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)),a=i*u},s=function(e){return e*(Math.PI/180)},d=function(e,n){var t,r,i;for(r in e)if(i=e[r],null!=i&&i.$geoIntersects){if(t=i.$geoIntersects.$geometry,"Polygon"!==t.type)break;n=m.filter(n,function(e){return e[r]&&"Point"===e[r].type?p(e[r],t):!1})}return n},t.regularizeUpsert=function(e,n,r,i){var o,u,a,c,s;for(m.isFunction(n)&&(s=[void 0,n,r],n=s[0],r=s[1],i=s[2]),m.isArray(e)?n=n||[]:(e=[e],n=[n]),u=m.map(e,function(e,t){return{doc:e,base:t<n.length?n[t]:void 0}}),a=0,c=u.length;c>a;a++){if(o=u[a],o.doc._id||(o.doc._id=t.createUid()),o.base&&!o.base._id)throw new Error("Base needs _id");if(o.base&&o.base._id!==o.doc._id)throw new Error("Base needs same _id")}return[u,r,i]}},{"./MemoryDb":6,"./selector":7,async:11,bowser:12,lodash:"nJZoxB","sorted-object-array":14}],lodash:[function(e,n){n.exports=e("nJZoxB")},{}],nJZoxB:[function(e,n){n.exports=window._},{}],11:[function(e,n){(function(e){!function(){function t(e){var n=!1;return function(){if(n)throw new Error("Callback was already called.");n=!0,e.apply(r,arguments)}}var r,i,o={};r=this,null!=r&&(i=r.async),o.noConflict=function(){return r.async=i,o};var u=Object.prototype.toString,a=Array.isArray||function(e){return"[object Array]"===u.call(e)},c=function(e,n){if(e.forEach)return e.forEach(n);for(var t=0;t<e.length;t+=1)n(e[t],t,e)},s=function(e,n){if(e.map)return e.map(n);var t=[];return c(e,function(e,r,i){t.push(n(e,r,i))}),t},l=function(e,n,t){return e.reduce?e.reduce(n,t):(c(e,function(e,r,i){t=n(t,e,r,i)}),t)},f=function(e){if(Object.keys)return Object.keys(e);var n=[];for(var t in e)e.hasOwnProperty(t)&&n.push(t);return n};"undefined"!=typeof e&&e.nextTick?(o.nextTick=e.nextTick,o.setImmediate="undefined"!=typeof setImmediate?function(e){setImmediate(e)}:o.nextTick):"function"==typeof setImmediate?(o.nextTick=function(e){setImmediate(e)},o.setImmediate=o.nextTick):(o.nextTick=function(e){setTimeout(e,0)},o.setImmediate=o.nextTick),o.each=function(e,n,r){function i(n){n?(r(n),r=function(){}):(o+=1,o>=e.length&&r())}if(r=r||function(){},!e.length)return r();var o=0;c(e,function(e){n(e,t(i))})},o.forEach=o.each,o.eachSeries=function(e,n,t){if(t=t||function(){},!e.length)return t();var r=0,i=function(){n(e[r],function(n){n?(t(n),t=function(){}):(r+=1,r>=e.length?t():i())})};i()},o.forEachSeries=o.eachSeries,o.eachLimit=function(e,n,t,r){var i=p(n);i.apply(null,[e,t,r])},o.forEachLimit=o.eachLimit;var p=function(e){return function(n,t,r){if(r=r||function(){},!n.length||0>=e)return r();var i=0,o=0,u=0;!function a(){if(i>=n.length)return r();for(;e>u&&o<n.length;)o+=1,u+=1,t(n[o-1],function(e){e?(r(e),r=function(){}):(i+=1,u-=1,i>=n.length?r():a())})}()}},d=function(e){return function(){var n=Array.prototype.slice.call(arguments);return e.apply(null,[o.each].concat(n))}},h=function(e,n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(null,[p(e)].concat(t))}},m=function(e){return function(){var n=Array.prototype.slice.call(arguments);return e.apply(null,[o.eachSeries].concat(n))}},v=function(e,n,t,r){if(n=s(n,function(e,n){return{index:n,value:e}}),r){var i=[];e(n,function(e,n){t(e.value,function(t,r){i[e.index]=r,n(t)})},function(e){r(e,i)})}else e(n,function(e,n){t(e.value,function(e){n(e)})})};o.map=d(v),o.mapSeries=m(v),o.mapLimit=function(e,n,t,r){return y(n)(e,t,r)};var y=function(e){return h(e,v)};o.reduce=function(e,n,t,r){o.eachSeries(e,function(e,r){t(n,e,function(e,t){n=t,r(e)})},function(e){r(e,n)})},o.inject=o.reduce,o.foldl=o.reduce,o.reduceRight=function(e,n,t,r){var i=s(e,function(e){return e}).reverse();o.reduce(i,n,t,r)},o.foldr=o.reduceRight;var g=function(e,n,t,r){var i=[];n=s(n,function(e,n){return{index:n,value:e}}),e(n,function(e,n){t(e.value,function(t){t&&i.push(e),n()})},function(){r(s(i.sort(function(e,n){return e.index-n.index}),function(e){return e.value}))})};o.filter=d(g),o.filterSeries=m(g),o.select=o.filter,o.selectSeries=o.filterSeries;var b=function(e,n,t,r){var i=[];n=s(n,function(e,n){return{index:n,value:e}}),e(n,function(e,n){t(e.value,function(t){t||i.push(e),n()})},function(){r(s(i.sort(function(e,n){return e.index-n.index}),function(e){return e.value}))})};o.reject=d(b),o.rejectSeries=m(b);var _=function(e,n,t,r){e(n,function(e,n){t(e,function(t){t?(r(e),r=function(){}):n()})},function(){r()})};o.detect=d(_),o.detectSeries=m(_),o.some=function(e,n,t){o.each(e,function(e,r){n(e,function(e){e&&(t(!0),t=function(){}),r()
})},function(){t(!1)})},o.any=o.some,o.every=function(e,n,t){o.each(e,function(e,r){n(e,function(e){e||(t(!1),t=function(){}),r()})},function(){t(!0)})},o.all=o.every,o.sortBy=function(e,n,t){o.map(e,function(e,t){n(e,function(n,r){n?t(n):t(null,{value:e,criteria:r})})},function(e,n){if(e)return t(e);var r=function(e,n){var t=e.criteria,r=n.criteria;return r>t?-1:t>r?1:0};t(null,s(n.sort(r),function(e){return e.value}))})},o.auto=function(e,n){n=n||function(){};var t=f(e),r=t.length;if(!r)return n();var i={},u=[],s=function(e){u.unshift(e)},p=function(e){for(var n=0;n<u.length;n+=1)if(u[n]===e)return u.splice(n,1),void 0},d=function(){r--,c(u.slice(0),function(e){e()})};s(function(){if(!r){var e=n;n=function(){},e(null,i)}}),c(t,function(t){var r=a(e[t])?e[t]:[e[t]],u=function(e){var r=Array.prototype.slice.call(arguments,1);if(r.length<=1&&(r=r[0]),e){var u={};c(f(i),function(e){u[e]=i[e]}),u[t]=r,n(e,u),n=function(){}}else i[t]=r,o.setImmediate(d)},h=r.slice(0,Math.abs(r.length-1))||[],m=function(){return l(h,function(e,n){return e&&i.hasOwnProperty(n)},!0)&&!i.hasOwnProperty(t)};if(m())r[r.length-1](u,i);else{var v=function(){m()&&(p(v),r[r.length-1](u,i))};s(v)}})},o.retry=function(e,n,t){var r=5,i=[];"function"==typeof e&&(t=n,n=e,e=r),e=parseInt(e,10)||r;var u=function(r,u){for(var a=function(e,n){return function(t){e(function(e,r){t(!e||n,{err:e,result:r})},u)}};e;)i.push(a(n,!(e-=1)));o.series(i,function(e,n){n=n[n.length-1],(r||t)(n.err,n.result)})};return t?u():u},o.waterfall=function(e,n){if(n=n||function(){},!a(e)){var t=new Error("First argument to waterfall must be an array of functions");return n(t)}if(!e.length)return n();var r=function(e){return function(t){if(t)n.apply(null,arguments),n=function(){};else{var i=Array.prototype.slice.call(arguments,1),u=e.next();u?i.push(r(u)):i.push(n),o.setImmediate(function(){e.apply(null,i)})}}};r(o.iterator(e))()};var $=function(e,n,t){if(t=t||function(){},a(n))e.map(n,function(e,n){e&&e(function(e){var t=Array.prototype.slice.call(arguments,1);t.length<=1&&(t=t[0]),n.call(null,e,t)})},t);else{var r={};e.each(f(n),function(e,t){n[e](function(n){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[e]=i,t(n)})},function(e){t(e,r)})}};o.parallel=function(e,n){$({map:o.map,each:o.each},e,n)},o.parallelLimit=function(e,n,t){$({map:y(n),each:p(n)},e,t)},o.series=function(e,n){if(n=n||function(){},a(e))o.mapSeries(e,function(e,n){e&&e(function(e){var t=Array.prototype.slice.call(arguments,1);t.length<=1&&(t=t[0]),n.call(null,e,t)})},n);else{var t={};o.eachSeries(f(e),function(n,r){e[n](function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),t[n]=i,r(e)})},function(e){n(e,t)})}},o.iterator=function(e){var n=function(t){var r=function(){return e.length&&e[t].apply(null,arguments),r.next()};return r.next=function(){return t<e.length-1?n(t+1):null},r};return n(0)},o.apply=function(e){var n=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,n.concat(Array.prototype.slice.call(arguments)))}};var w=function(e,n,t,r){var i=[];e(n,function(e,n){t(e,function(e,t){i=i.concat(t||[]),n(e)})},function(e){r(e,i)})};o.concat=d(w),o.concatSeries=m(w),o.whilst=function(e,n,t){e()?n(function(r){return r?t(r):(o.whilst(e,n,t),void 0)}):t()},o.doWhilst=function(e,n,t){e(function(r){if(r)return t(r);var i=Array.prototype.slice.call(arguments,1);n.apply(null,i)?o.doWhilst(e,n,t):t()})},o.until=function(e,n,t){e()?t():n(function(r){return r?t(r):(o.until(e,n,t),void 0)})},o.doUntil=function(e,n,t){e(function(r){if(r)return t(r);var i=Array.prototype.slice.call(arguments,1);n.apply(null,i)?t():o.doUntil(e,n,t)})},o.queue=function(e,n){function r(e,n,t,r){return e.started||(e.started=!0),a(n)||(n=[n]),0==n.length?o.setImmediate(function(){e.drain&&e.drain()}):(c(n,function(n){var i={data:n,callback:"function"==typeof r?r:null};t?e.tasks.unshift(i):e.tasks.push(i),e.saturated&&e.tasks.length===e.concurrency&&e.saturated(),o.setImmediate(e.process)}),void 0)}void 0===n&&(n=1);var i=0,u={tasks:[],concurrency:n,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(e,n){r(u,e,!1,n)},kill:function(){u.drain=null,u.tasks=[]},unshift:function(e,n){r(u,e,!0,n)},process:function(){if(!u.paused&&i<u.concurrency&&u.tasks.length){var n=u.tasks.shift();u.empty&&0===u.tasks.length&&u.empty(),i+=1;var r=function(){i-=1,n.callback&&n.callback.apply(n,arguments),u.drain&&u.tasks.length+i===0&&u.drain(),u.process()},o=t(r);e(n.data,o)}},length:function(){return u.tasks.length},running:function(){return i},idle:function(){return u.tasks.length+i===0},pause:function(){u.paused!==!0&&(u.paused=!0,u.process())},resume:function(){u.paused!==!1&&(u.paused=!1,u.process())}};return u},o.cargo=function(e,n){var t=!1,r=[],i={tasks:r,payload:n,saturated:null,empty:null,drain:null,drained:!0,push:function(e,t){a(e)||(e=[e]),c(e,function(e){r.push({data:e,callback:"function"==typeof t?t:null}),i.drained=!1,i.saturated&&r.length===n&&i.saturated()}),o.setImmediate(i.process)},process:function u(){if(!t){if(0===r.length)return i.drain&&!i.drained&&i.drain(),i.drained=!0,void 0;var o="number"==typeof n?r.splice(0,n):r.splice(0,r.length),a=s(o,function(e){return e.data});i.empty&&i.empty(),t=!0,e(a,function(){t=!1;var e=arguments;c(o,function(n){n.callback&&n.callback.apply(null,e)}),u()})}},length:function(){return r.length},running:function(){return t}};return i};var k=function(e){return function(n){var t=Array.prototype.slice.call(arguments,1);n.apply(null,t.concat([function(n){var t=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(n?console.error&&console.error(n):console[e]&&c(t,function(n){console[e](n)}))}]))}};o.log=k("log"),o.dir=k("dir"),o.memoize=function(e,n){var t={},r={};n=n||function(e){return e};var i=function(){var i=Array.prototype.slice.call(arguments),u=i.pop(),a=n.apply(null,i);a in t?o.nextTick(function(){u.apply(null,t[a])}):a in r?r[a].push(u):(r[a]=[u],e.apply(null,i.concat([function(){t[a]=arguments;var e=r[a];delete r[a];for(var n=0,i=e.length;i>n;n++)e[n].apply(null,arguments)}])))};return i.memo=t,i.unmemoized=e,i},o.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},o.times=function(e,n,t){for(var r=[],i=0;e>i;i++)r.push(i);return o.map(r,n,t)},o.timesSeries=function(e,n,t){for(var r=[],i=0;e>i;i++)r.push(i);return o.mapSeries(r,n,t)},o.seq=function(){var e=arguments;return function(){var n=this,t=Array.prototype.slice.call(arguments),r=t.pop();o.reduce(e,t,function(e,t,r){t.apply(n,e.concat([function(){var e=arguments[0],n=Array.prototype.slice.call(arguments,1);r(e,n)}]))},function(e,t){r.apply(n,[e].concat(t))})}},o.compose=function(){return o.seq.apply(null,Array.prototype.reverse.call(arguments))};var O=function(e,n){var t=function(){var t=this,r=Array.prototype.slice.call(arguments),i=r.pop();return e(n,function(e,n){e.apply(t,r.concat([n]))},i)};if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return t.apply(this,r)}return t};o.applyEach=d(O),o.applyEachSeries=m(O),o.forever=function(e,n){function t(r){if(r){if(n)return n(r);throw r}e(t)}t()},"undefined"!=typeof n&&n.exports?n.exports=o:"undefined"!=typeof define&&define.amd?define([],function(){return o}):r.async=o}()}).call(this,e("FWaASH"))},{FWaASH:13}],12:[function(e,n){!function(e,t){"undefined"!=typeof n&&n.exports?n.exports.browser=t():"function"==typeof define&&define.amd?define(t):this[e]=t()}("bowser",function(){function e(e){function t(n){var t=e.match(n);return t&&t.length>1&&t[1]||""}function r(n){var t=e.match(n);return t&&t.length>1&&t[2]||""}var i,o=t(/(ipod|iphone|ipad)/i).toLowerCase(),u=/like android/i.test(e),a=!u&&/android/i.test(e),c=t(/edge\/(\d+(\.\d+)?)/i),s=t(/version\/(\d+(\.\d+)?)/i),l=/tablet/i.test(e),f=!l&&/[^-]mobi/i.test(e);/opera|opr/i.test(e)?i={name:"Opera",opera:n,version:s||t(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/windows phone/i.test(e)?(i={name:"Windows Phone",windowsphone:n},c?(i.msedge=n,i.version=c):(i.msie=n,i.version=t(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?i={name:"Internet Explorer",msie:n,version:t(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(e)?i={name:"Microsoft Edge",msedge:n,version:c}:/chrome|crios|crmo/i.test(e)?i={name:"Chrome",chrome:n,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:o?(i={name:"iphone"==o?"iPhone":"ipad"==o?"iPad":"iPod"},s&&(i.version=s)):/sailfish/i.test(e)?i={name:"Sailfish",sailfish:n,version:t(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?i={name:"SeaMonkey",seamonkey:n,version:t(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(e)?(i={name:"Firefox",firefox:n,version:t(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(i.firefoxos=n)):/silk/i.test(e)?i={name:"Amazon Silk",silk:n,version:t(/silk\/(\d+(\.\d+)?)/i)}:a?i={name:"Android",version:s}:/phantom/i.test(e)?i={name:"PhantomJS",phantom:n,version:t(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?i={name:"BlackBerry",blackberry:n,version:s||t(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:/(web|hpw)os/i.test(e)?(i={name:"WebOS",webos:n,version:s||t(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(i.touchpad=n)):i=/bada/i.test(e)?{name:"Bada",bada:n,version:t(/dolfin\/(\d+(\.\d+)?)/i)}:/tizen/i.test(e)?{name:"Tizen",tizen:n,version:t(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||s}:/safari/i.test(e)?{name:"Safari",safari:n,version:s}:{name:t(/^(.*)\/(.*) /),version:r(/^(.*)\/(.*) /)},!i.msedge&&/(apple)?webkit/i.test(e)?(i.name=i.name||"Webkit",i.webkit=n,!i.version&&s&&(i.version=s)):!i.opera&&/gecko\//i.test(e)&&(i.name=i.name||"Gecko",i.gecko=n,i.version=i.version||t(/gecko\/(\d+(\.\d+)?)/i)),i.msedge||!a&&!i.silk?o&&(i[o]=n,i.ios=n):i.android=n;var p="";i.windowsphone?p=t(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):o?(p=t(/os (\d+([_\s]\d+)*) like mac os x/i),p=p.replace(/[_\s]/g,".")):a?p=t(/android[ \/-](\d+(\.\d+)*)/i):i.webos?p=t(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):i.blackberry?p=t(/rim\stablet\sos\s(\d+(\.\d+)*)/i):i.bada?p=t(/bada\/(\d+(\.\d+)*)/i):i.tizen&&(p=t(/tizen[\/\s](\d+(\.\d+)*)/i)),p&&(i.osversion=p);var d=p.split(".")[0];return l||"ipad"==o||a&&(3==d||4==d&&!f)||i.silk?i.tablet=n:(f||"iphone"==o||"ipod"==o||a||i.blackberry||i.webos||i.bada)&&(i.mobile=n),i.msedge||i.msie&&i.version>=10||i.chrome&&i.version>=20||i.firefox&&i.version>=20||i.safari&&i.version>=6||i.opera&&i.version>=10||i.ios&&i.osversion&&i.osversion.split(".")[0]>=6||i.blackberry&&i.version>=10.1?i.a=n:i.msie&&i.version<10||i.chrome&&i.version<20||i.firefox&&i.version<20||i.safari&&i.version<6||i.opera&&i.version<10||i.ios&&i.osversion&&i.osversion.split(".")[0]<6?i.c=n:i.x=n,i}var n=!0,t=e("undefined"!=typeof navigator?navigator.userAgent:"");return t.test=function(e){for(var n=0;n<e.length;++n){var r=e[n];if("string"==typeof r&&r in t)return!0}return!1},t._detect=e,t})},{}],13:[function(e,n){function t(){}var r=n.exports={};r.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(n){var t=[];return window.addEventListener("message",function(e){var n=e.source;if((n===window||null===n)&&"process-tick"===e.data&&(e.stopPropagation(),t.length>0)){var r=t.shift();r()}},!0),function(e){t.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=t,r.addListener=t,r.once=t,r.off=t,r.removeListener=t,r.removeAllListeners=t,r.emit=t,r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")}},{}],14:[function(e,n){function t(){var e=0;"object"!=typeof arguments[0]&&null!=arguments[0]?(this.key=arguments[0],e=1):this.key="id",this.array=[];for(var n=arguments.length;n>e;)this.insert(arguments[e++])}"object"==typeof n&&(n.exports=t),t.prototype.insert=function(e){var n=this.array,t=n.length;for(n.push(e);t;){var r=t,i=--t;if(this.getKey(r)<this.getKey(i)){var o=n[r];n[r]=n[i],n[i]=o}}return this},t.prototype.getKey=function(e){return this.array[e][this.key]},t.prototype.search=function(e){for(var n="object"==typeof e?e[this.key]:e,t=0,r=this.array,i=r.length;i>t;){var o=(i+t)/2>>>0,u=this.getKey(o);if(n>u)t=o+1;else{if(!(u>n))return o;i=o}}return-1},t.prototype.remove=function(e){var n=this.search(e);return n>=0&&this.array.splice(n,1),this}},{}]},{},[]);