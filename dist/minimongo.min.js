require=function t(e,n,r){function o(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return o(n?n:t)},c,c.exports,t,e,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({"Focm2+":[function(t,e,n){n.MemoryDb=t("./lib/MemoryDb"),n.LocalStorageDb=t("./lib/LocalStorageDb"),n.IndexedDb=t("./lib/IndexedDb"),n.WebSQLDb=t("./lib/WebSQLDb"),n.RemoteDb=t("./lib/RemoteDb"),n.HybridDb=t("./lib/HybridDb"),n.utils=t("./lib/utils")},{"./lib/HybridDb":6,"./lib/IndexedDb":7,"./lib/LocalStorageDb":8,"./lib/MemoryDb":9,"./lib/RemoteDb":10,"./lib/WebSQLDb":11,"./lib/utils":14}],minimongo:[function(t,e){e.exports=t("Focm2+")},{}],jquery:[function(t,e){e.exports=t("/nayFu")},{}],"/nayFu":[function(t,e){e.exports=window.$},{}],5:[function(t,e){var n=t("lodash");EJSON={};var r={};EJSON.addType=function(t,e){if(n.has(r,t))throw new Error("Type "+t+" already present");r[t]=e};var o=[{matchJSONValue:function(t){return n.has(t,"$date")&&1===n.size(t)},matchObject:function(t){return t instanceof Date},toJSONValue:function(t){return{$date:t.getTime()}},fromJSONValue:function(t){return new Date(t.$date)}},{matchJSONValue:function(t){return n.has(t,"$binary")&&1===n.size(t)},matchObject:function(t){return"undefined"!=typeof Uint8Array&&t instanceof Uint8Array||t&&n.has(t,"$Uint8ArrayPolyfill")},toJSONValue:function(t){return{$binary:EJSON._base64Encode(t)}},fromJSONValue:function(t){return EJSON._base64Decode(t.$binary)}},{matchJSONValue:function(t){return n.has(t,"$escape")&&1===n.size(t)},matchObject:function(t){return n.isEmpty(t)||n.size(t)>2?!1:n.any(o,function(e){return e.matchJSONValue(t)})},toJSONValue:function(t){var e={};return n.each(t,function(t,n){e[n]=EJSON.toJSONValue(t)}),{$escape:e}},fromJSONValue:function(t){var e={};return n.each(t.$escape,function(t,n){e[n]=EJSON.fromJSONValue(t)}),e}},{matchJSONValue:function(t){return n.has(t,"$type")&&n.has(t,"$value")&&2===n.size(t)},matchObject:function(t){return EJSON._isCustomType(t)},toJSONValue:function(t){return{$type:t.typeName(),$value:t.toJSONValue()}},fromJSONValue:function(t){var e=t.$type,n=r[e];return n(t.$value)}}];EJSON._isCustomType=function(t){return t&&"function"==typeof t.toJSONValue&&"function"==typeof t.typeName&&n.has(r,t.typeName())};var i=EJSON._adjustTypesToJSONValue=function(t){if(null===t)return null;var e=s(t);return void 0!==e?e:(n.each(t,function(e,n){if("object"==typeof e||void 0===e){var r=s(e);return r?(t[n]=r,void 0):(i(e),void 0)}}),t)},s=function(t){for(var e=0;e<o.length;e++){var n=o[e];if(n.matchObject(t))return n.toJSONValue(t)}return void 0};EJSON.toJSONValue=function(t){var e=s(t);return void 0!==e?e:("object"==typeof t&&(t=EJSON.clone(t),i(t)),t)};var a=EJSON._adjustTypesFromJSONValue=function(t){if(null===t)return null;var e=u(t);return e!==t?e:(n.each(t,function(e,n){if("object"==typeof e){var r=u(e);if(e!==r)return t[n]=r,void 0;a(e)}}),t)},u=function(t){if("object"==typeof t&&null!==t&&n.size(t)<=2&&n.all(t,function(t,e){return"string"==typeof e&&"$"===e.substr(0,1)}))for(var e=0;e<o.length;e++){var r=o[e];if(r.matchJSONValue(t))return r.fromJSONValue(t)}return t};EJSON.fromJSONValue=function(t){var e=u(t);return e===t&&"object"==typeof t?(t=EJSON.clone(t),a(t),t):e},EJSON.stringify=function(t){return JSON.stringify(EJSON.toJSONValue(t))},EJSON.parse=function(t){return EJSON.fromJSONValue(JSON.parse(t))},EJSON.isBinary=function(t){return"undefined"!=typeof Uint8Array&&t instanceof Uint8Array||t&&t.$Uint8ArrayPolyfill},EJSON.equals=function(t,e,r){var o,i=!(!r||!r.keyOrderSensitive);if(t===e)return!0;if(!t||!e)return!1;if("object"!=typeof t||"object"!=typeof e)return!1;if(t instanceof Date&&e instanceof Date)return t.valueOf()===e.valueOf();if(EJSON.isBinary(t)&&EJSON.isBinary(e)){if(t.length!==e.length)return!1;for(o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}if("function"==typeof t.equals)return t.equals(e,r);if(t instanceof Array){if(!(e instanceof Array))return!1;if(t.length!==e.length)return!1;for(o=0;o<t.length;o++)if(!EJSON.equals(t[o],e[o],r))return!1;return!0}var s;if(i){var a=[];return n.each(e,function(t,e){a.push(e)}),o=0,s=n.all(t,function(t,n){return o>=a.length?!1:n!==a[o]?!1:EJSON.equals(t,e[a[o]],r)?(o++,!0):!1}),s&&o===a.length}return o=0,s=n.all(t,function(t,i){return n.has(e,i)?EJSON.equals(t,e[i],r)?(o++,!0):!1:!1}),s&&n.size(e)===o},EJSON.clone=function(t){var e;if("object"!=typeof t)return t;if(null===t)return null;if(t instanceof Date)return new Date(t.getTime());if(EJSON.isBinary(t)){e=EJSON.newBinary(t.length);for(var r=0;r<t.length;r++)e[r]=t[r];return e}if(n.isArray(t)||n.isArguments(t)){for(e=[],r=0;r<t.length;r++)e[r]=EJSON.clone(t[r]);return e}return"function"==typeof t.clone?t.clone():(e={},n.each(t,function(t,n){e[n]=EJSON.clone(t)}),e)},e.exports=EJSON},{lodash:"nJZoxB"}],6:[function(t,e){var n,r,o,i,s;s=t("lodash"),o=t("./utils").processFind,i=t("./utils"),e.exports=r=function(){function t(t,e){this.localDb=t,this.remoteDb=e,this.collections={}}return t.prototype.addCollection=function(t,e,r,o){var i,a;return s.isFunction(e)&&(a=[{},e,r],e=a[0],r=a[1],o=a[2]),i=new n(t,this.localDb[t],this.remoteDb[t],e),this[t]=i,this.collections[t]=i,null!=r?r():void 0},t.prototype.removeCollection=function(t,e){return delete this[t],delete this.collections[t],null!=e?e():void 0},t.prototype.upload=function(t,e){var n,r;return n=s.values(this.collections),r=function(t,e,n){var o;return o=s.first(t),o?o.upload(function(){return r(s.rest(t),e,n)},function(t){return n(t)}):e()},r(n,t,e)},t}(),n=function(){function t(t,e,n,r){this.name=t,this.localCol=e,this.remoteCol=n,this.options=r||{},s.defaults(this.options,{cacheFind:!0,cacheFindOne:!0,interim:!0,useLocalOnRemoteError:!0,shortcut:!1})}return t.prototype.find=function(t,e){return null==e&&(e={}),{fetch:function(n){return function(r,o){return n._findFetch(t,e,r,o)}}(this)}},t.prototype.findOne=function(t,e,n,r){var o,i;return null==e&&(e={}),s.isFunction(e)&&(i=[{},e,n],e=i[0],n=i[1],r=i[2]),s.defaults(e,this.options),o=function(o){return function(i){var a;return a=s.cloneDeep(e),a.interim=!1,a.cacheFind=e.cacheFindOne,a.useLocalOnRemoteError=!0,t._id?a.limit=1:delete a.limit,o.find(t,a).fetch(function(t){return t.length>0?s.isEqual(i,t[0])?void 0:n(t[0]):n(null)},r)}}(this),e.interim||e.shortcut?this.localCol.findOne(t,e,function(t){return t&&(n(s.cloneDeep(t)),e.shortcut)?void 0:o(t)},r):o()},t.prototype._findFetch=function(t,e,n,r){var i,a;return s.defaults(e,this.options),a=function(i){return function(a){var u,c,l;return c=s.cloneDeep(e),e.cacheFind&&delete c.fields,l=function(u){var c,l;return e.cacheFind?(c=function(){var o;return o=function(t){return s.isEqual(a,t)?void 0:n(t)},i.localCol.find(t,e).fetch(o,r)},i.localCol.cache(u,t,e,c,r)):(l=u,i.localCol.pendingRemoves(function(c){var f;return c.length>0&&(f=s.object(s.map(c,function(t){return[t,t]})),l=s.filter(u,function(t){return!s.has(f,t._id)})),i.localCol.pendingUpserts(function(r){var i;return r.length>0&&(i=s.object(s.map(r,function(t){return t.doc._id}),s.map(r,function(t){return t.doc._id})),l=s.filter(l,function(t){return!s.has(i,t._id)}),l=l.concat(s.pluck(r,"doc")),l=o(l,t,e)),s.isEqual(a,l)?void 0:n(l)},r)},r))},u=function(o){if(!e.interim){if(e.useLocalOnRemoteError)return i.localCol.find(t,e).fetch(n,r);if(r)return r(o)}},i.remoteCol.find(t,c).fetch(l,u)}}(this),e.interim?(i=function(t){return n(t),a(t)},this.localCol.find(t,e).fetch(i,r)):a()},t.prototype.upsert=function(t,e,n,r){return this.localCol.upsert(t,e,function(){return null!=n?n(t):void 0},r)},t.prototype.remove=function(t,e,n){return this.localCol.remove(t,function(){return null!=e?e():void 0},n)},t.prototype.upload=function(t,e){var n,r;return r=function(t){return function(e,n,o){var i;return i=s.first(e),i?t.remoteCol.upsert(i.doc,i.base,function(a){return t.localCol.resolveUpserts([i],function(){return t.localCol.cacheOne(a,function(){return r(s.rest(e),n,o)},o)},o)},function(a){return 410===a.status||403===a.status?t.localCol.remove(i.doc._id,function(){return t.localCol.resolveRemove(i.doc._id,function(){return 410===a.status?r(s.rest(e),n,o):o(a)},o)},o):o(a)}):n()}}(this),n=function(t){return function(e,r,o){var i;return i=s.first(e),i?t.remoteCol.remove(i,function(){return t.localCol.resolveRemove(i,function(){return n(s.rest(e),r,o)},o)},function(a){return 410===a.status||403===a.status?t.localCol.resolveRemove(i,function(){return 410===a.status?n(s.rest(e),r,o):o(a)},o):o(a)},o):r()}}(this),this.localCol.pendingUpserts(function(o){return function(i){return r(i,function(){return o.localCol.pendingRemoves(function(r){return n(r,t,e)},e)},e)}}(this),e)},t}()},{"./utils":14,lodash:"nJZoxB"}],7:[function(t,e){var n,r,o,i,s,a,u,c;c=t("lodash"),i=t("async"),r=t("idb-wrapper"),u=t("./utils"),a=t("./utils").processFind,s=t("./selector").compileSort,e.exports=o=function(){function t(t,e,n){var o;this.collections={};try{this.store=new r({dbVersion:1,storeName:"minimongo_"+t.namespace,keyPath:["col","doc._id"],autoIncrement:!1,onStoreReady:function(t){return function(){return e?e(t):void 0}}(this),onError:n,indexes:[{name:"col",keyPath:"col",unique:!1,multiEntry:!1},{name:"col-state",keyPath:["col","state"],unique:!1,multiEntry:!1}]})}catch(i){return o=i,n&&n(o),void 0}}return t.prototype.addCollection=function(t,e){var r;return r=new n(t,this.store),this[t]=r,this.collections[t]=r,e?e():void 0},t.prototype.removeCollection=function(t,e,n){return delete this[t],delete this.collections[t],this.store.query(function(t){return function(r){var o;return o=c.map(r,function(t){return[t.col,t.doc._id]}),o.length>0?t.store.removeBatch(o,function(){return null!=e?e():void 0},n):null!=e?e():void 0}}(this),{index:"col",keyRange:this.store.makeKeyRange({only:t}),onError:n})},t}(),n=function(){function t(t,e){this.name=t,this.store=e}return t.prototype.find=function(t,e){return{fetch:function(n){return function(r,o){return n._findFetch(t,e,r,o)}}(this)}},t.prototype.findOne=function(t,e,n,r){var o;return c.isFunction(e)&&(o=[{},e,n],e=o[0],n=o[1],r=o[2]),this.find(t,e).fetch(function(t){return null!=n?n(t.length>0?t[0]:null):void 0},r)},t.prototype._findFetch=function(t,e,n,r){return this.store.query(function(r){return r=c.filter(r,function(t){return"removed"!==t.state}),null!=n?n(a(c.pluck(r,"doc"),t,e)):void 0},{index:"col",keyRange:this.store.makeKeyRange({only:this.name}),onError:r})},t.prototype.upsert=function(t,e,n,r){var o,i,s;return s=u.regularizeUpsert(t,e,n,r),o=s[0],n=s[1],r=s[2],i=c.map(o,function(t){return function(e){return[t.name,e.doc._id]}}(this)),this.store.getBatch(i,function(e){return function(i){var s;return s=c.map(o,function(t,n){var r;return r=void 0!==t.base?t.base:i[n]&&i[n].doc&&"cached"===i[n].state?i[n].doc:i[n]&&i[n].doc&&"upserted"===i[n].state?i[n].base:null,{col:e.name,state:"upserted",doc:t.doc,base:r}}),e.store.putBatch(s,function(){return n?n(t):void 0},r)}}(this),r)},t.prototype.remove=function(t,e,n){return this.store.get([this.name,t],function(r){return function(o){return null==o&&(o={col:r.name,doc:{_id:t}}),o.state="removed",r.store.put(o,function(){return e?e(t):void 0},n)}}(this))},t.prototype.cache=function(t,e,n,r,o){var i,a,u;return u=function(i){return function(){var a,u;return a=c.object(c.pluck(t,"_id"),t),n.sort&&(u=s(n.sort)),i.find(e,n).fetch(function(e){var s,l;return l=[],s=c.map(e,function(t){return[i.name,t._id]}),0===s.length?(null!=r&&r(),void 0):i.store.getBatch(s,function(s){var f,h,d,p,v;for(f=p=0,v=s.length;v>=0?v>p:p>v;f=v>=0?++p:--p)if(h=s[f],d=e[f],!a[d._id]&&h&&"cached"===h.state){if(n.sort&&n.limit&&t.length===n.limit&&u(d,c.last(t))>=0)continue;l.push([i.name,d._id])}return l.length>0?i.store.removeBatch(l,function(){return null!=r?r():void 0},o):null!=r?r():void 0},o)},o)}}(this),0===t.length?u():(i=c.map(t,function(t){return function(e){return[t.name,e._id]}}(this)),a=[],this.store.getBatch(i,function(e){return function(n){var r,i,s,c,l;for(i=c=0,l=n.length;l>=0?l>c:c>l;i=l>=0?++c:--c)s=n[i],r=t[i],(null==s||"cached"===s.state)&&(!s||!r._rev||!s.doc._rev||r._rev>=s.doc._rev)&&a.push({col:e.name,state:"cached",doc:r});return a.length>0?e.store.putBatch(a,u,o):u()}}(this),o))},t.prototype.pendingUpserts=function(t,e){return this.store.query(function(e){var n;return n=c.map(e,function(t){return{doc:t.doc,base:t.base||null}}),null!=t?t(n):void 0},{index:"col-state",keyRange:this.store.makeKeyRange({only:[this.name,"upserted"]}),onError:e})},t.prototype.pendingRemoves=function(t,e){return this.store.query(function(e){return null!=t?t(c.pluck(c.pluck(e,"doc"),"_id")):void 0},{index:"col-state",keyRange:this.store.makeKeyRange({only:[this.name,"removed"]}),onError:e})},t.prototype.resolveUpserts=function(t,e,n){var r;return r=c.map(t,function(t){return function(e){return[t.name,e.doc._id]}}(this)),this.store.getBatch(r,function(r){return function(o){var i,s,a,u,l;for(s=[],i=u=0,l=t.length;l>=0?l>u:u>l;i=l>=0?++u:--u)a=o[i],a&&"upserted"===a.state&&(c.isEqual(a.doc,t[i].doc)?(a.state="cached",s.push(a)):(a.base=t[i].doc,s.push(a)));return s.length>0?r.store.putBatch(s,function(){return e?e():void 0},n):e?e():void 0}}(this),n)},t.prototype.resolveRemove=function(t,e,n){return this.store.get([this.name,t],function(r){return function(o){return"removed"===o.state?r.store.remove([r.name,t],function(){return null!=e?e():void 0},n):void 0}}(this))},t.prototype.seed=function(t,e,n){var r,o;return c.isArray(t)||(t=[t]),r=c.map(t,function(t){return function(e){return[t.name,e._id]}}(this)),o=[],this.store.getBatch(r,function(r){return function(i){var s,a,u,c,l;for(a=c=0,l=i.length;l>=0?l>c:c>l;a=l>=0?++c:--c)u=i[a],s=t[a],null==u&&o.push({col:r.name,state:"cached",doc:s});return o.length>0?r.store.putBatch(o,function(){return null!=e?e():void 0},n):null!=e?e():void 0}}(this),n)},t.prototype.cacheOne=function(t,e,n){return this.store.get([this.name,t._id],function(r){return function(o){return o&&t._rev&&o.doc._rev&&t._rev<o.doc._rev?(null!=e&&e(),void 0):(null==o&&(o={col:r.name,state:"cached",doc:t}),"cached"===o.state?(o.doc=t,r.store.put(o,function(){return null!=e?e():void 0},n)):null!=e?e():void 0)}}(this))},t}()},{"./selector":13,"./utils":14,async:17,"idb-wrapper":55,lodash:"nJZoxB"}],8:[function(t,e){var n,r,o,i,s,a;a=t("lodash"),s=t("./utils"),i=t("./utils").processFind,o=t("./selector").compileSort,e.exports=r=function(){function t(t,e){this.collections={},t&&t.namespace&&window.localStorage&&(this.namespace=t.namespace),e&&e(this)}return t.prototype.addCollection=function(t,e){var r,o;return this.namespace&&(o=this.namespace+"."+t),r=new n(t,o),this[t]=r,this.collections[t]=r,null!=e?e():void 0},t.prototype.removeCollection=function(t,e){var n,r,o,i,s,a,u;if(this.namespace&&window.localStorage){for(o=[],n=i=0,u=window.localStorage.length;u>=0?u>i:i>u;n=u>=0?++i:--i)o.push(window.localStorage.key(n));for(s=0,a=o.length;a>s;s++)r=o[s],r.substring(0,this.namespace.length+1)===this.namespace+"."&&window.localStorage.removeItem(r)}return delete this[t],delete this.collections[t],null!=e?e():void 0},t}(),n=function(){function t(t,e){this.name=t,this.namespace=e,this.items={},this.upserts={},this.removes={},window.localStorage&&null!=e&&this.loadStorage()}return t.prototype.loadStorage=function(){var t,e,n,r,o,i,s,u,c,l;for(this.itemNamespace=this.namespace+"_",e=s=0,l=window.localStorage.length;l>=0?l>s:s>l;e=l>=0?++s:--s)r=window.localStorage.key(e),r.substring(0,this.itemNamespace.length)===this.itemNamespace&&(n=JSON.parse(window.localStorage[r]),this.items[n._id]=n);for(i=window.localStorage[this.namespace+"upserts"]?JSON.parse(window.localStorage[this.namespace+"upserts"]):[],u=0,c=i.length;c>u;u++)r=i[u],this.upserts[r]={doc:this.items[r]},t=window.localStorage[this.namespace+"upsertbase_"+r]?JSON.parse(window.localStorage[this.namespace+"upsertbase_"+r]):null,this.upserts[r].base=t;return o=window.localStorage[this.namespace+"removes"]?JSON.parse(window.localStorage[this.namespace+"removes"]):[],this.removes=a.object(a.pluck(o,"_id"),o)},t.prototype.find=function(){return{fetch:function(){return function(){return"??????????????"}}(this)}},t.prototype.findOne=function(t,e,n,r){var o;return a.isFunction(e)&&(o=[{},e,n],e=o[0],n=o[1],r=o[2]),this.find(t,e).fetch(function(t){return null!=n?n(t.length>0?t[0]:null):void 0},r)},t.prototype._findFetch=function(t,e,n){return null!=n?n(i(this.items,t,e)):void 0},t.prototype.upsert=function(t,e,n,r){var o,i,u,c,l;for(l=s.regularizeUpsert(t,e,n,r),i=l[0],n=l[1],r=l[2],u=0,c=i.length;c>u;u++)o=i[u],void 0===o.base&&(o.base=this.upserts[o.doc._id]?this.upserts[o.doc._id].base:this.items[o.doc._id]||null),o=a.cloneDeep(o),this._putItem(o.doc),this._putUpsert(o);return n?n(t):void 0},t.prototype.remove=function(t,e){return a.has(this.items,t)?(this._putRemove(this.items[t]),this._deleteItem(t),this._deleteUpsert(t)):this._putRemove({_id:t}),null!=e?e():void 0},t.prototype._putItem=function(t){return this.items[t._id]=t,this.namespace?window.localStorage[this.itemNamespace+t._id]=JSON.stringify(t):void 0},t.prototype._deleteItem=function(t){return delete this.items[t],this.namespace?window.localStorage.removeItem(this.itemNamespace+t):void 0},t.prototype._putUpsert=function(t){return this.upserts[t.doc._id]=t,this.namespace?(window.localStorage[this.namespace+"upserts"]=JSON.stringify(a.keys(this.upserts)),window.localStorage[this.namespace+"upsertbase_"+t.doc._id]=JSON.stringify(t.base)):void 0},t.prototype._deleteUpsert=function(t){return delete this.upserts[t],this.namespace?window.localStorage[this.namespace+"upserts"]=JSON.stringify(a.keys(this.upserts)):void 0},t.prototype._putRemove=function(t){return this.removes[t._id]=t,this.namespace?window.localStorage[this.namespace+"removes"]=JSON.stringify(a.values(this.removes)):void 0},t.prototype._deleteRemove=function(t){return delete this.removes[t],this.namespace?window.localStorage[this.namespace+"removes"]=JSON.stringify(a.values(this.removes)):void 0},t.prototype.cache=function(t,e,n,r,i){var s,u,c,l,f;for(l=0,f=t.length;f>l;l++)s=t[l],this.cacheOne(s);return u=a.object(a.pluck(t,"_id"),t),n.sort&&(c=o(n.sort)),this.find(e,n).fetch(function(e){return function(o){var i,s,l;for(s=0,l=o.length;l>s;s++)if(i=o[s],!u[i._id]&&!a.has(e.upserts,i._id)){if(n.sort&&n.limit&&t.length===n.limit&&c(i,a.last(t))>=0)continue;e._deleteItem(i._id)}return null!=r?r():void 0}}(this),i)},t.prototype.pendingUpserts=function(t){return t(a.values(this.upserts))},t.prototype.pendingRemoves=function(t){return t(a.pluck(this.removes,"_id"))},t.prototype.resolveUpserts=function(t,e){var n,r,o;for(r=0,o=t.length;o>r;r++)n=t[r],this.upserts[n.doc._id]&&(a.isEqual(n.doc,this.upserts[n.doc._id].doc)?this._deleteUpsert(n.doc._id):(this.upserts[n.doc._id].base=n.doc,this._putUpsert(this.upserts[n.doc._id])));return null!=e?e():void 0},t.prototype.resolveRemove=function(t,e){return this._deleteRemove(t),null!=e?e():void 0},t.prototype.seed=function(t,e){var n,r,o;for(a.isArray(t)||(t=[t]),r=0,o=t.length;o>r;r++)n=t[r],a.has(this.items,n._id)||a.has(this.removes,n._id)||this._putItem(n);return null!=e?e():void 0},t.prototype.cacheOne=function(t,e){var n;return a.has(this.upserts,t._id)||a.has(this.removes,t._id)||(n=this.items[t._id],(!n||!t._rev||!n._rev||t._rev>=n._rev)&&this._putItem(t)),null!=e?e():void 0},t}()},{"./selector":13,"./utils":14,lodash:"nJZoxB"}],9:[function(t,e){var n,r,o,i,s,a;a=t("lodash"),s=t("./utils"),i=t("./utils").processFind,o=t("./selector").compileSort,e.exports=r=function(){function t(t,e){this.collections={},e&&e(this)}return t.prototype.addCollection=function(t,e){var r;return r=new n(t),this[t]=r,this.collections[t]=r,null!=e?e():void 0},t.prototype.removeCollection=function(t,e){return delete this[t],delete this.collections[t],null!=e?e():void 0},t}(),n=function(){function t(t){this.name=t,this.items={},this.upserts={},this.removes={}}return t.prototype.find=function(t,e){return this._findFetch(t,e)},t.prototype.findOne=function(t,e,n,r){var o,i;return a.isFunction(e)&&(i=[{},e,n],e=i[0],n=i[1],r=i[2]),o=this.find(t,e),o?o[0]:null},t.prototype._findFetch=function(t,e){return i(this.items,t,e)},t.prototype.upsert=function(t,e,n,r){var o,i,u,c,l;for(l=s.regularizeUpsert(t,e,n,r),i=l[0],n=l[1],r=l[2],u=0,c=i.length;c>u;u++)o=i[u],void 0===o.base&&(o.base=this.upserts[o.doc._id]?this.upserts[o.doc._id].base:this.items[o.doc._id]||null),o=a.cloneDeep(o),this.items[o.doc._id]=o.doc,this.upserts[o.doc._id]=o;return n?n(t):void 0},t.prototype.insert=function(t,e,n,r){var o,i,u,c,l,f;for(l=s.regularizeUpsert(t,e,n,r),i=l[0],n=l[1],r=l[2],f=[],u=0,c=i.length;c>u;u++){if(o=i[u],void 0===o.base&&(o.base=this.items[o.doc._id]||null),o=a.cloneDeep(o),this.items[o.doc._id])throw"Duplicate ID";f.push(this.items[o.doc._id]=o.doc)}return f},t.prototype.update=function(t,e){var n,r,o,s,u,c,l;for(o=i(this.items,t),l=[],u=0,c=o.length;c>u;u++)n=o[u],void 0===n.docs&&(n.doc=e),void 0===n.base&&(n.base=this.items[n.doc._id]||null),n=a.cloneDeep(n),l.push(function(){var t;t=[];for(r in e)s=e[r],t.push(this.items[n._id][r]=e[r]);return t}.call(this));return l},t.prototype.remove=function(t,e){return a.has(this.items,t)?(this.removes[t]=this.items[t],delete this.items[t],delete this.upserts[t]):this.removes[t]={_id:t},null!=e?e():void 0},t.prototype.cache=function(t,e,n,r,i){var s,u,c,l,f;for(l=0,f=t.length;f>l;l++)s=t[l],this.cacheOne(s);return u=a.object(a.pluck(t,"_id"),t),n.sort&&(c=o(n.sort)),this.find(e,n).fetch(function(e){return function(o){var i,s,l;for(s=0,l=o.length;l>s;s++)if(i=o[s],!u[i._id]&&!a.has(e.upserts,i._id)){if(n.sort&&n.limit&&t.length===n.limit&&c(i,a.last(t))>=0)continue;delete e.items[i._id]}return null!=r?r():void 0}}(this),i)},t.prototype.pendingUpserts=function(t){return t(a.values(this.upserts))},t.prototype.pendingRemoves=function(t){return t(a.pluck(this.removes,"_id"))},t.prototype.resolveUpserts=function(t,e){var n,r,o,i;for(o=0,i=t.length;i>o;o++)r=t[o],n=r.doc._id,this.upserts[n]&&(a.isEqual(r.doc,this.upserts[n].doc)?delete this.upserts[n]:this.upserts[n].base=r.doc);return null!=e?e():void 0},t.prototype.resolveRemove=function(t,e){return delete this.removes[t],null!=e?e():void 0},t.prototype.seed=function(t,e){var n,r,o;for(a.isArray(t)||(t=[t]),r=0,o=t.length;o>r;r++)n=t[r],a.has(this.items,n._id)||a.has(this.removes,n._id)||(this.items[n._id]=n);return null!=e?e():void 0},t.prototype.cacheOne=function(t,e){var n;return a.has(this.upserts,t._id)||a.has(this.removes,t._id)||(n=this.items[t._id],(!n||!t._rev||!n._rev||t._rev>=n._rev)&&(this.items[t._id]=t)),null!=e?e():void 0},t}()},{"./selector":13,"./utils":14,lodash:"nJZoxB"}],10:[function(t,e){var n,r,o,i,s,a,u;u=t("lodash"),n=t("jquery"),i=t("async"),a=t("./utils"),s=t("./jQueryHttpClient"),e.exports=o=function(){function t(t,e,n){this.url=t,this.client=e,this.collections={},this.httpClient=n||s}return t.prototype.addCollection=function(t,e,n,o){var i,s,a;return null==e&&(e={}),u.isFunction(e)&&(a=[{},e,n],e=a[0],n=a[1],o=a[2]),s=e.url||this.url+t,i=new r(t,s,this.client,this.httpClient),this[t]=i,this.collections[t]=i,null!=n?n():void 0},t.prototype.removeCollection=function(t,e){return delete this[t],delete this.collections[t],null!=e?e():void 0},t}(),r=function(){function t(t,e,n,r){this.name=t,this.url=e,this.client=n,this.httpClient=r}return t.prototype.find=function(t,e){return null==e&&(e={}),{fetch:function(n){return function(r,o){var i;return i={},e.sort&&(i.sort=JSON.stringify(e.sort)),e.limit&&(i.limit=e.limit),e.skip&&(i.skip=e.skip),e.fields&&(i.fields=JSON.stringify(e.fields)),n.client&&(i.client=n.client),i.selector=JSON.stringify(t||{}),"undefined"!=typeof navigator&&null!==navigator&&-1!==navigator.userAgent.toLowerCase().indexOf("android 2.3")&&(i._=(new Date).getTime()),n.httpClient("GET",n.url,i,null,r,o)}}(this)}},t.prototype.findOne=function(t,e,n,r){var o,i;return null==e&&(e={}),u.isFunction(e)&&(i=[{},e,n],e=i[0],n=i[1],r=i[2]),o={},e.sort&&(o.sort=JSON.stringify(e.sort)),o.limit=1,this.client&&(o.client=this.client),o.selector=JSON.stringify(t||{}),"undefined"!=typeof navigator&&null!==navigator&&-1!==navigator.userAgent.toLowerCase().indexOf("android 2.3")&&(o._=(new Date).getTime()),this.httpClient("GET",this.url,o,null,function(t){return t&&t.length>0?n(t[0]):n(null)},r)},t.prototype.upsert=function(t,e,n,r){var o,s,c;if(c=a.regularizeUpsert(t,e,n,r),o=c[0],n=c[1],r=c[2],!this.client)throw new Error("Client required to upsert");return s=[],i.eachLimit(o,8,function(t){return function(e,n){var r;return e.doc._id||(e.doc._id=a.createUid()),r={client:t.client},"undefined"!=typeof navigator&&null!==navigator&&-1!==navigator.userAgent.toLowerCase().indexOf("android 2.3")&&(r._=(new Date).getTime()),e.base?t.httpClient("PATCH",t.url+"/"+e.doc._id,r,e,function(t){return s.push(t),n()},function(t){return n(t)}):t.httpClient("POST",t.url,r,e.doc,function(t){return s.push(t),n()},function(t){return n(t)})}}(this),function(e){if(e)return r&&r(e),void 0;if(u.isArray(t)){if(n)return n(s)}else if(n)return n(s[0])})},t.prototype.remove=function(t,e,n){var r;if(!this.client)throw new Error("Client required to remove");return r={client:this.client},this.httpClient("DELETE",this.url+"/"+t,r,null,e,function(t){return 410===t.status?e():n(t)})},t}()},{"./jQueryHttpClient":12,"./utils":14,async:17,jquery:"/nayFu",lodash:"nJZoxB"}],11:[function(t,e){var n,r,o,i,s,a,u,c;c=t("lodash"),o=t("async"),u=t("./utils"),a=t("./utils").processFind,i=t("./selector").compileSort,s=function(){},e.exports=r=function(){function t(t,e,n){var r,o,i,a;this.collections={};try{if(this.db=window.openDatabase("minimongo_"+t.namespace,"","Minimongo:"+t.namespace,5242880),!this.db)return n(new Error("Failed to create database"))}catch(u){return o=u,n&&n(o),void 0}return i=function(t){return t.executeSql("CREATE TABLE docs (\n  col TEXT NOT NULL,\n  id TEXT NOT NULL,\n  state TEXT NOT NULL,\n  doc TEXT,\n  PRIMARY KEY (col, id));",[],s,n)},a=function(t){return t.executeSql("ALTER TABLE docs ADD COLUMN base TEXT;",[],s,n)},r=function(t){return function(){return"1.0"===t.db.version?t.db.changeVersion("1.0","2.0",a,n,function(){return e?e(t):void 0}):"2.0"!==t.db.version?n("Unknown db version "+t.db.version):e?e(t):void 0}}(this),""===this.db.version?this.db.changeVersion("","1.0",i,n,r):r(),this.db}return t.prototype.addCollection=function(t,e){var r;return r=new n(t,this.db),this[t]=r,this.collections[t]=r,e?e():void 0},t.prototype.removeCollection=function(t,e,n){return delete this[t],delete this.collections[t],this.db.transaction(function(r){return r.executeSql("DELETE FROM docs WHERE col = ?",[t],e,n)},n)},t}(),n=function(){function t(t,e){this.name=t,this.db=e}return t.prototype.find=function(t,e){return{fetch:function(n){return function(r,o){return n._findFetch(t,e,r,o)}}(this)}},t.prototype.findOne=function(t,e,n,r){var o;return c.isFunction(e)&&(o=[{},e,n],e=o[0],n=o[1],r=o[2]),this.find(t,e).fetch(function(t){return null!=n?n(t.length>0?t[0]:null):void 0},r)},t.prototype._findFetch=function(t,e,n,r){return r=r||function(){},this.db.readTransaction(function(o){return function(i){return i.executeSql("SELECT * FROM docs WHERE col = ?",[o.name],function(r,o){var i,s,u,c,l;for(i=[],s=c=0,l=o.rows.length;l>=0?l>c:c>l;s=l>=0?++c:--c)u=o.rows.item(s),"removed"!==u.state&&i.push(JSON.parse(u.doc));return null!=n?n(a(i,t,e)):void 0},r)}}(this),r)},t.prototype.upsert=function(t,e,n,r){var i,a;return a=u.regularizeUpsert(t,e,n,r),i=a[0],n=a[1],r=a[2],r=r||function(){},this.db.transaction(function(t){return function(n){var a;return a=c.map(i,function(t){return t.doc._id}),e={},o.eachSeries(a,function(r,o){return n.executeSql("SELECT * FROM docs WHERE col = ? AND id = ?",[t.name,r],function(t,r){var i;return n=t,r.rows.length>0&&(i=r.rows.item(0),"upserted"===i.state?e[i.id]=i.base?JSON.parse(i.base):null:"cached"===i.state&&(e[i.id]=JSON.parse(i.doc))),o()})},function(){var o,a,u,c,l,f;for(f=[],c=0,l=i.length;l>c;c++)u=i[c],a=u.doc._id,o=void 0!==u.base?u.base:e[a]?e[a]:null,f.push(n.executeSql("INSERT OR REPLACE INTO docs (col, id, state, doc, base) VALUES (?, ?, ?, ?, ?)",[t.name,u.doc._id,"upserted",JSON.stringify(u.doc),JSON.stringify(o)],s,r));return f})}}(this),r,function(){return n?n(t):void 0})},t.prototype.remove=function(t,e,n){return n=n||function(){},this.db.transaction(function(r){return function(o){return o.executeSql("SELECT * FROM docs WHERE col = ? AND id = ?",[r.name,t],function(o,i){return i.rows.length>0?o.executeSql('UPDATE docs SET state="removed" WHERE col = ? AND id = ?',[r.name,t],function(){return e?e(t):void 0},n):o.executeSql("INSERT INTO docs (col, id, state, doc) VALUES (?, ?, ?, ?)",[r.name,t,"removed",JSON.stringify({_id:t})],function(){return e?e(t):void 0},n)},n)}}(this),n)},t.prototype.cache=function(t,e,n,r,s){return s=s||function(){},this.db.transaction(function(a){return function(u){return o.eachSeries(t,function(t,e){return u.executeSql("SELECT * FROM docs WHERE col = ? AND id = ?",[a.name,t._id],function(n,r){var o;return 0===r.rows.length||"cached"===r.rows.item(0).state?(o=r.rows.length>0?JSON.parse(r.rows.item(0).doc):null,!o||!t._rev||!o._rev||t._rev>=o._rev?n.executeSql("INSERT OR REPLACE INTO docs (col, id, state, doc) VALUES (?, ?, ?, ?)",[a.name,t._id,"cached",JSON.stringify(t)],function(){return e()},s):e()):e()},e,s)},function(u){var l,f;return u?(s&&s(u),void 0):(l=c.object(c.pluck(t,"_id"),t),n.sort&&(f=i(n.sort)),a.find(e,n).fetch(function(e){return a.db.transaction(function(i){return o.eachSeries(e,function(e,r){return i.executeSql("SELECT * FROM docs WHERE col = ? AND id = ?",[a.name,e._id],function(o,i){return!l[e._id]&&i.rows.length>0&&"cached"===i.rows.item(0).state?n.sort&&n.limit&&t.length===n.limit&&f(e,c.last(t))>=0?r():o.executeSql("DELETE FROM docs WHERE col = ? AND id = ?",[a.name,e._id],function(){return r()},s):r()},r,s)},function(t){return null!=t?(null!=s&&s(t),void 0):null!=r?r():void 0})},s)},s))})}}(this),s)},t.prototype.pendingUpserts=function(t,e){return e=e||function(){},this.db.readTransaction(function(n){return function(r){return r.executeSql("SELECT * FROM docs WHERE col = ? AND state = ?",[n.name,"upserted"],function(e,n){var r,o,i,s,a;for(r=[],o=s=0,a=n.rows.length;a>=0?a>s:s>a;o=a>=0?++s:--s)i=n.rows.item(o),r.push({doc:JSON.parse(i.doc),base:i.base?JSON.parse(i.base):null});return null!=t?t(r):void 0},e)}}(this),e)},t.prototype.pendingRemoves=function(t,e){return e=e||function(){},this.db.readTransaction(function(n){return function(r){return r.executeSql("SELECT * FROM docs WHERE col = ? AND state = ?",[n.name,"removed"],function(e,n){var r,o,i,s,a;for(r=[],o=s=0,a=n.rows.length;a>=0?a>s:s>a;o=a>=0?++s:--s)i=n.rows.item(o),r.push(JSON.parse(i.doc)._id);return null!=t?t(r):void 0},e)}}(this),e)},t.prototype.resolveUpserts=function(t,e,n){return n=n||function(){},this.db.transaction(function(r){return function(i){return o.eachSeries(t,function(t,e){return i.executeSql("SELECT * FROM docs WHERE col = ? AND id = ?",[r.name,t.doc._id],function(o,i){return i.rows.length>0&&"upserted"===i.rows.item(0).state?c.isEqual(JSON.parse(i.rows.item(0).doc),t.doc)?(o.executeSql('UPDATE docs SET state="cached" WHERE col = ? AND id = ?',[r.name,t.doc._id],s,n),e()):(o.executeSql("UPDATE docs SET base=? WHERE col = ? AND id = ?",[JSON.stringify(t.doc),r.name,t.doc._id],s,n),e()):e()},n)},function(t){return t?n(t):e?e():void 0})}}(this),n)},t.prototype.resolveRemove=function(t,e,n){return n=n||function(){},this.db.transaction(function(r){return function(o){return o.executeSql('DELETE FROM docs WHERE state="removed" AND col = ? AND id = ?',[r.name,t],function(){return e?e(t):void 0},n)}}(this),n)},t.prototype.seed=function(t,e,n){return n=n||function(){},this.db.transaction(function(r){return function(i){return o.eachSeries(t,function(t,e){return i.executeSql("SELECT * FROM docs WHERE col = ? AND id = ?",[r.name,t._id],function(o,i){return 0===i.rows.length?o.executeSql("INSERT OR REPLACE INTO docs (col, id, state, doc) VALUES (?, ?, ?, ?)",[r.name,t._id,"cached",JSON.stringify(t)],function(){return e()
},n):e()},e,n)},function(t){if(t){if(n)return n(t)}else if(e)return e()})}}(this),n)},t.prototype.cacheOne=function(t,e,n){return n=n||function(){},this.db.transaction(function(r){return function(o){return o.executeSql("SELECT * FROM docs WHERE col = ? AND id = ?",[r.name,t._id],function(o,i){var s;if(0===i.rows.length||"cached"===i.rows.item(0).state){if(s=i.rows.length>0?JSON.parse(i.rows.item(0).doc):null,!s||!t._rev||!s._rev||t._rev>=s._rev)return o.executeSql("INSERT OR REPLACE INTO docs (col, id, state, doc) VALUES (?, ?, ?, ?)",[r.name,t._id,"cached",JSON.stringify(t)],function(){return e?e(t):void 0},n);if(e)return e(t)}else if(e)return e(t)},n)}}(this),n)},t}()},{"./selector":13,"./utils":14,async:17,lodash:"nJZoxB"}],12:[function(t,e){e.exports=function(t,e,n,r,o,i){var s,a;return s=e+"?"+$.param(n),"GET"===t?a=$.getJSON(s):"DELETE"===t?a=$.ajax(s,{type:"DELETE"}):("POST"===t||"PATCH"===t)&&(a=$.ajax(s,{data:JSON.stringify(r),contentType:"application/json",type:t})),a.done(function(e,n,r){return null==e&&console.error("Empty response: "+s+":"+t+" returned "+r.responseText+" as JSON "+JSON.stringify(e)),o(e||null)}),a.fail(function(t){return i?i(t):void 0})}},{}],13:[function(t,e,n){LocalCollection={},EJSON=t("./EJSON");var r=t("lodash"),o=function(t){return r.isArray(t)&&!EJSON.isBinary(t)},i=function(t,e){return o(t)?r.any(t,e):e(t)},s=function(t,e){return e(t)?!0:o(t)&&r.any(t,e)},a=function(t){var e=void 0;for(var n in t){var r="$"===n.substr(0,1);if(void 0===e)e=r;else if(e!==r)throw new Error("Inconsistent selector: "+t)}return!!e},u=function(t){if(null==t)return function(t){return i(t,function(t){return null==t})};if(!r.isObject(t))return function(e){return i(e,function(e){return e===t})};if(t instanceof RegExp)return function(e){return void 0===e?!1:i(e,function(e){return t.test(e)})};if(o(t))return function(e){return o(e)?s(e,function(e){return LocalCollection._f._equal(t,e)}):!1};if(a(t)){var e=[];return r.each(t,function(n,o){if(!r.has(l,o))throw new Error("Unrecognized operator: "+o);e.push(l[o](n,t.$options))}),function(t){return r.all(e,function(e){return e(t)})}}return function(e){return i(e,function(e){return LocalCollection._f._equal(t,e)})}},c={$and:function(t){if(!o(t)||r.isEmpty(t))throw Error("$and/$or/$nor must be nonempty array");var e=r.map(t,f);return function(t){return r.all(e,function(e){return e(t)})}},$or:function(t){if(!o(t)||r.isEmpty(t))throw Error("$and/$or/$nor must be nonempty array");var e=r.map(t,f);return function(t){return r.any(e,function(e){return e(t)})}},$nor:function(t){if(!o(t)||r.isEmpty(t))throw Error("$and/$or/$nor must be nonempty array");var e=r.map(t,f);return function(t){return r.all(e,function(e){return!e(t)})}},$where:function(t){return t instanceof Function||(t=Function("return "+t)),function(e){return t.call(e)}}},l={$in:function(t){if(!o(t))throw new Error("Argument to $in must be array");return function(e){return s(e,function(e){return r.any(t,function(t){return LocalCollection._f._equal(t,e)})})}},$all:function(t){if(!o(t))throw new Error("Argument to $all must be array");return function(e){return o(e)?r.all(t,function(t){return r.any(e,function(e){return LocalCollection._f._equal(t,e)})}):!1}},$lt:function(t){return function(e){return i(e,function(e){return LocalCollection._f._cmp(e,t)<0})}},$lte:function(t){return function(e){return i(e,function(e){return LocalCollection._f._cmp(e,t)<=0})}},$gt:function(t){return function(e){return i(e,function(e){return LocalCollection._f._cmp(e,t)>0})}},$gte:function(t){return function(e){return i(e,function(e){return LocalCollection._f._cmp(e,t)>=0})}},$ne:function(t){return function(e){return!s(e,function(e){return LocalCollection._f._equal(e,t)})}},$nin:function(t){if(!o(t))throw new Error("Argument to $nin must be array");var e=l.$in(t);return function(t){return void 0===t?!0:!e(t)}},$exists:function(t){return function(e){return t===(void 0!==e)}},$mod:function(t){var e=t[0],n=t[1];return function(t){return i(t,function(t){return t%e===n})}},$size:function(t){return function(e){return o(e)&&t===e.length}},$type:function(t){return function(e){return void 0===e?!1:i(e,function(e){return LocalCollection._f._type(e)===t})}},$regex:function(t,e){if(void 0!==e){if(/[^gim]/.test(e))throw new Error("Only the i, m, and g regexp options are supported");var n=t instanceof RegExp?t.source:t;t=new RegExp(n,e)}else t instanceof RegExp||(t=new RegExp(t));return function(e){return void 0===e?!1:i(e,function(e){return t.test(e)})}},$options:function(){return function(){return!0}},$elemMatch:function(t){var e=f(t);return function(t){return o(t)?r.any(t,function(t){return e(t)}):!1}},$not:function(t){var e=u(t);return function(t){return!e(t)}},$near:function(){return function(){return!0}},$geoIntersects:function(){return function(){return!0}}};LocalCollection._f={_type:function(t){return"number"==typeof t?1:"string"==typeof t?2:"boolean"==typeof t?8:o(t)?4:null===t?10:t instanceof RegExp?11:"function"==typeof t?13:t instanceof Date?9:EJSON.isBinary(t)?5:t instanceof Meteor.Collection.ObjectID?7:3},_equal:function(t,e){return EJSON.equals(t,e,{keyOrderSensitive:!0})},_typeorder:function(t){return[-1,1,2,3,4,5,-1,6,7,8,0,9,-1,100,2,100,1,8,1][t]},_cmp:function(t,e){if(void 0===t)return void 0===e?0:-1;if(void 0===e)return 1;var n=LocalCollection._f._type(t),r=LocalCollection._f._type(e),o=LocalCollection._f._typeorder(n),i=LocalCollection._f._typeorder(r);if(o!==i)return i>o?-1:1;if(n!==r)throw Error("Missing type coercion logic in _cmp");if(7===n&&(n=r=2,t=t.toHexString(),e=e.toHexString()),9===n&&(n=r=1,t=t.getTime(),e=e.getTime()),1===n)return t-e;if(2===r)return e>t?-1:t===e?0:1;if(3===n){var s=function(t){var e=[];for(var n in t)e.push(n),e.push(t[n]);return e};return LocalCollection._f._cmp(s(t),s(e))}if(4===n)for(var a=0;;a++){if(a===t.length)return a===e.length?0:-1;if(a===e.length)return 1;var u=LocalCollection._f._cmp(t[a],e[a]);if(0!==u)return u}if(5===n){if(t.length!==e.length)return t.length-e.length;for(a=0;a<t.length;a++){if(t[a]<e[a])return-1;if(t[a]>e[a])return 1}return 0}if(8===n)return t?e?0:1:e?-1:0;if(10===n)return 0;if(11===n)throw Error("Sorting not supported on regular expression");if(13===n)throw Error("Sorting not supported on Javascript code");throw Error("Unknown type to sort")}},LocalCollection._matches=function(t,e){return LocalCollection._compileSelector(t)(e)},LocalCollection._makeLookupFunction=function(t){var e,n,i,s=t.indexOf(".");if(-1===s)e=t;else{e=t.substr(0,s);var a=t.substr(s+1);n=LocalCollection._makeLookupFunction(a),i=/^\d+(\.|$)/.test(a)}return function(t){if(null==t)return[void 0];var s=t[e];return n?o(s)&&0===s.length?[void 0]:((!o(s)||i)&&(s=[s]),Array.prototype.concat.apply([],r.map(s,n))):[s]}};var f=function(t){var e=[];return r.each(t,function(t,n){if("$"===n.substr(0,1)){if(!r.has(c,n))throw new Error("Unrecognized logical operator: "+n);e.push(c[n](t))}else{var o=LocalCollection._makeLookupFunction(n),i=u(t);e.push(function(t){var e=o(t);return r.any(e,i)})}}),function(t){return r.all(e,function(e){return e(t)})}};LocalCollection._compileSelector=function(t){if(t instanceof Function)return function(e){return t.call(e)};if(LocalCollection._selectorIsId(t))return function(e){return EJSON.equals(e._id,t)};if(!t||"_id"in t&&!t._id)return function(){return!1};if("boolean"==typeof t||o(t)||EJSON.isBinary(t))throw new Error("Invalid selector: "+t);return f(t)},LocalCollection._compileSort=function(t){var e=[];if(t instanceof Array)for(var n=0;n<t.length;n++)"string"==typeof t[n]?e.push({lookup:LocalCollection._makeLookupFunction(t[n]),ascending:!0}):e.push({lookup:LocalCollection._makeLookupFunction(t[n][0]),ascending:"desc"!==t[n][1]});else{if("object"!=typeof t)throw Error("Bad sort specification: ",JSON.stringify(t));for(var i in t)e.push({lookup:LocalCollection._makeLookupFunction(i),ascending:t[i]>=0})}if(0===e.length)return function(){return 0};var s=function(t,e){var n,i=!0;return r.each(t,function(t){o(t)||(t=[t]),o(t)&&0===t.length&&(t=[void 0]),r.each(t,function(t){if(i)n=t,i=!1;else{var r=LocalCollection._f._cmp(n,t);(e&&r>0||!e&&0>r)&&(n=t)}})}),n};return function(t,n){for(var r=0;r<e.length;++r){var o=e[r],i=s(o.lookup(t),o.ascending),a=s(o.lookup(n),o.ascending),u=LocalCollection._f._cmp(i,a);if(0!==u)return o.ascending?u:-u}return 0}},n.compileDocumentSelector=f,n.compileSort=LocalCollection._compileSort},{"./EJSON":5,lodash:"nJZoxB"}],14:[function(t,e,n){var r,o,i,s,a,u,c,l,f,h,d,p,v,g;g=t("lodash"),i=t("async"),s=t("bowser"),r=t("sorted-object-array"),a=t("chai"),u=t("./selector").compileDocumentSelector,c=t("./selector").compileSort,h=function(){var t;if(!window.localStorage)return!1;try{return window.localStorage.setItem("test","test"),window.localStorage.removeItem("test"),!0}catch(e){return t=e,!1}},n.compileDocumentSelector=u,n.autoselectLocalDb=function(e,n){var r,o,i,a,u;return r=t("./IndexedDb"),a=t("./WebSQLDb"),o=t("./LocalStorageDb"),i=t("./MemoryDb"),u=s.browser,new i(e,n)},n.migrateLocalDb=function(e,n,r,o){var i,s,a,u,c;i=t("./HybridDb"),a=new i(e,n),c=e.collections;for(u in c)s=c[u],n[u]&&a.addCollection(u);return a.upload(r,o)},n.processFind=function(t,e,i){var s,a;return s=g.filter(g.values(t),u(e)),s=v(e,s),s=p(e,s),i&&i.skip&&(s=g.rest(s,i.skip)),s=i?n.filterFields(s,i):g.map(s,function(t){return g.cloneDeep(t)}),a=s,s.skip=function(t){return o(g.rest(a,t))},s.limit=function(t){return o(g.first(a,t))},s.sort=function(t){var e,n;return e=t[Object.keys(t)[0]],n=new r(Object.keys(t)[0],a).array[0],e>=0?n:n.reverse()},s},o=function(t){var e;return e=t,e.skip=function(t){return g.rest(e,t)},e.limit=function(t){return g.first(e,t)},e},n.filterFields=function(t,e){return null==e&&(e={}),0===g.keys(e).length?t:g.map(t,function(t){var n,r,o,i,s,a,u,c,l,f,h,d,p,v,y,m,b,w,E,x,S;if(t=g.cloneDeep(t),o={},1===g.first(g.values(e))){for(w=g.keys(e).concat(["_id"]),c=0,d=w.length;d>c;c++){for(n=w[c],s=n.split("."),i=t,l=0,p=s.length;p>l;l++)a=s[l],i&&(i=i[a]);if(null!=i){for(r=t,u=o,E=g.initial(s),f=0,v=E.length;v>f;f++)a=E[f],u[a]=u[a]||{},u=u[a],r=r[a];u[g.last(s)]=r[g.last(s)]}}return o}for(x=g.keys(e),h=0,y=x.length;y>h;h++){for(n=x[h],s=n.split("."),i=t,S=g.initial(s),b=0,m=S.length;m>b;b++)a=S[b],i&&(i=i[a]);null!=i&&delete i[g.last(s)]}return t})},n.createUid=function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var e,n;return e=16*Math.random()|0,n="x"===t?e:3&e|8,n.toString(16)})},v=function(t,e){var n,r,o,i;for(o in t)if(i=t[o],null!=i&&i.$near){if(r=i.$near.$geometry,"Point"!==r.type)break;e=g.filter(e,function(t){return t[o]&&"Point"===t[o].type}),n=g.map(e,function(t){return{doc:t,distance:f(r.coordinates[1],r.coordinates[0],t[o].coordinates[1],t[o].coordinates[0])}}),n=g.filter(n,function(t){return t.distance>=0}),n=g.sortBy(n,"distance"),i.$near.$maxDistance&&(n=g.filter(n,function(t){return t.distance<=i.$near.$maxDistance})),e=g.pluck(n,"doc")}return e},d=function(t,e){if(!g.isEqual(g.first(e.coordinates[0]),g.last(e.coordinates[0])))throw new Error("First must equal last");return t.coordinates[0]<Math.min.apply(this,g.map(e.coordinates[0],function(t){return t[0]}))?!1:t.coordinates[1]<Math.min.apply(this,g.map(e.coordinates[0],function(t){return t[1]}))?!1:t.coordinates[0]>Math.max.apply(this,g.map(e.coordinates[0],function(t){return t[0]}))?!1:t.coordinates[1]>Math.max.apply(this,g.map(e.coordinates[0],function(t){return t[1]}))?!1:!0},f=function(t,e,n,r){var o,i,s,a,u,c;return o=6370986,u=l(n-t),c=l(r-e),i=Math.sin(u/2)*Math.sin(u/2)+Math.cos(l(t))*Math.cos(l(n))*Math.sin(c/2)*Math.sin(c/2),s=2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)),a=o*s},l=function(t){return t*(Math.PI/180)},p=function(t,e){var n,r,o;for(r in t)if(o=t[r],null!=o&&o.$geoIntersects){if(n=o.$geoIntersects.$geometry,"Polygon"!==n.type)break;e=g.filter(e,function(t){return t[r]&&"Point"===t[r].type?d(t[r],n):!1})}return e},n.regularizeUpsert=function(t,e,r,o){var i,s,a,u,c;for(g.isFunction(e)&&(c=[void 0,e,r],e=c[0],r=c[1],o=c[2]),g.isArray(t)?e=e||[]:(t=[t],e=[e]),s=g.map(t,function(t,n){return{doc:t,base:n<e.length?e[n]:void 0}}),a=0,u=s.length;u>a;a++){if(i=s[a],i.doc._id||(i.doc._id=n.createUid()),i.base&&!i.base._id)throw new Error("Base needs _id");if(i.base&&i.base._id!==i.doc._id)throw new Error("Base needs same _id")}return[s,r,o]}},{"./HybridDb":6,"./IndexedDb":7,"./LocalStorageDb":8,"./MemoryDb":9,"./WebSQLDb":11,"./selector":13,async:17,bowser:18,chai:23,lodash:"nJZoxB","sorted-object-array":56}],lodash:[function(t,e){e.exports=t("nJZoxB")},{}],nJZoxB:[function(t,e){e.exports=window._},{}],17:[function(t,e){(function(t){!function(){function n(t){var e=!1;return function(){if(e)throw new Error("Callback was already called.");e=!0,t.apply(r,arguments)}}var r,o,i={};r=this,null!=r&&(o=r.async),i.noConflict=function(){return r.async=o,i};var s=Object.prototype.toString,a=Array.isArray||function(t){return"[object Array]"===s.call(t)},u=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n+=1)e(t[n],n,t)},c=function(t,e){if(t.map)return t.map(e);var n=[];return u(t,function(t,r,o){n.push(e(t,r,o))}),n},l=function(t,e,n){return t.reduce?t.reduce(e,n):(u(t,function(t,r,o){n=e(n,t,r,o)}),n)},f=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e};"undefined"!=typeof t&&t.nextTick?(i.nextTick=t.nextTick,i.setImmediate="undefined"!=typeof setImmediate?function(t){setImmediate(t)}:i.nextTick):"function"==typeof setImmediate?(i.nextTick=function(t){setImmediate(t)},i.setImmediate=i.nextTick):(i.nextTick=function(t){setTimeout(t,0)},i.setImmediate=i.nextTick),i.each=function(t,e,r){function o(e){e?(r(e),r=function(){}):(i+=1,i>=t.length&&r())}if(r=r||function(){},!t.length)return r();var i=0;u(t,function(t){e(t,n(o))})},i.forEach=i.each,i.eachSeries=function(t,e,n){if(n=n||function(){},!t.length)return n();var r=0,o=function(){e(t[r],function(e){e?(n(e),n=function(){}):(r+=1,r>=t.length?n():o())})};o()},i.forEachSeries=i.eachSeries,i.eachLimit=function(t,e,n,r){var o=h(e);o.apply(null,[t,n,r])},i.forEachLimit=i.eachLimit;var h=function(t){return function(e,n,r){if(r=r||function(){},!e.length||0>=t)return r();var o=0,i=0,s=0;!function a(){if(o>=e.length)return r();for(;t>s&&i<e.length;)i+=1,s+=1,n(e[i-1],function(t){t?(r(t),r=function(){}):(o+=1,s-=1,o>=e.length?r():a())})}()}},d=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[i.each].concat(e))}},p=function(t,e){return function(){var n=Array.prototype.slice.call(arguments);return e.apply(null,[h(t)].concat(n))}},v=function(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[i.eachSeries].concat(e))}},g=function(t,e,n,r){if(e=c(e,function(t,e){return{index:e,value:t}}),r){var o=[];t(e,function(t,e){n(t.value,function(n,r){o[t.index]=r,e(n)})},function(t){r(t,o)})}else t(e,function(t,e){n(t.value,function(t){e(t)})})};i.map=d(g),i.mapSeries=v(g),i.mapLimit=function(t,e,n,r){return y(e)(t,n,r)};var y=function(t){return p(t,g)};i.reduce=function(t,e,n,r){i.eachSeries(t,function(t,r){n(e,t,function(t,n){e=n,r(t)})},function(t){r(t,e)})},i.inject=i.reduce,i.foldl=i.reduce,i.reduceRight=function(t,e,n,r){var o=c(t,function(t){return t}).reverse();i.reduce(o,e,n,r)},i.foldr=i.reduceRight;var m=function(t,e,n,r){var o=[];e=c(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){n(t.value,function(n){n&&o.push(t),e()})},function(){r(c(o.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};i.filter=d(m),i.filterSeries=v(m),i.select=i.filter,i.selectSeries=i.filterSeries;var b=function(t,e,n,r){var o=[];e=c(e,function(t,e){return{index:e,value:t}}),t(e,function(t,e){n(t.value,function(n){n||o.push(t),e()})},function(){r(c(o.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})};i.reject=d(b),i.rejectSeries=v(b);var w=function(t,e,n,r){t(e,function(t,e){n(t,function(n){n?(r(t),r=function(){}):e()})},function(){r()})};i.detect=d(w),i.detectSeries=v(w),i.some=function(t,e,n){i.each(t,function(t,r){e(t,function(t){t&&(n(!0),n=function(){}),r()})},function(){n(!1)})},i.any=i.some,i.every=function(t,e,n){i.each(t,function(t,r){e(t,function(t){t||(n(!1),n=function(){}),r()})},function(){n(!0)})},i.all=i.every,i.sortBy=function(t,e,n){i.map(t,function(t,n){e(t,function(e,r){e?n(e):n(null,{value:t,criteria:r})})},function(t,e){if(t)return n(t);var r=function(t,e){var n=t.criteria,r=e.criteria;return r>n?-1:n>r?1:0};n(null,c(e.sort(r),function(t){return t.value}))})},i.auto=function(t,e){e=e||function(){};var n=f(t),r=n.length;if(!r)return e();var o={},s=[],c=function(t){s.unshift(t)},h=function(t){for(var e=0;e<s.length;e+=1)if(s[e]===t)return s.splice(e,1),void 0},d=function(){r--,u(s.slice(0),function(t){t()})};c(function(){if(!r){var t=e;e=function(){},t(null,o)}}),u(n,function(n){var r=a(t[n])?t[n]:[t[n]],s=function(t){var r=Array.prototype.slice.call(arguments,1);if(r.length<=1&&(r=r[0]),t){var s={};u(f(o),function(t){s[t]=o[t]}),s[n]=r,e(t,s),e=function(){}}else o[n]=r,i.setImmediate(d)},p=r.slice(0,Math.abs(r.length-1))||[],v=function(){return l(p,function(t,e){return t&&o.hasOwnProperty(e)},!0)&&!o.hasOwnProperty(n)};if(v())r[r.length-1](s,o);else{var g=function(){v()&&(h(g),r[r.length-1](s,o))};c(g)}})},i.retry=function(t,e,n){var r=5,o=[];"function"==typeof t&&(n=e,e=t,t=r),t=parseInt(t,10)||r;var s=function(r,s){for(var a=function(t,e){return function(n){t(function(t,r){n(!t||e,{err:t,result:r})},s)}};t;)o.push(a(e,!(t-=1)));i.series(o,function(t,e){e=e[e.length-1],(r||n)(e.err,e.result)})};return n?s():s},i.waterfall=function(t,e){if(e=e||function(){},!a(t)){var n=new Error("First argument to waterfall must be an array of functions");return e(n)}if(!t.length)return e();var r=function(t){return function(n){if(n)e.apply(null,arguments),e=function(){};else{var o=Array.prototype.slice.call(arguments,1),s=t.next();s?o.push(r(s)):o.push(e),i.setImmediate(function(){t.apply(null,o)})}}};r(i.iterator(t))()};var E=function(t,e,n){if(n=n||function(){},a(e))t.map(e,function(t,e){t&&t(function(t){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),e.call(null,t,n)})},n);else{var r={};t.each(f(e),function(t,n){e[t](function(e){var o=Array.prototype.slice.call(arguments,1);o.length<=1&&(o=o[0]),r[t]=o,n(e)})},function(t){n(t,r)})}};i.parallel=function(t,e){E({map:i.map,each:i.each},t,e)},i.parallelLimit=function(t,e,n){E({map:y(e),each:h(e)},t,n)},i.series=function(t,e){if(e=e||function(){},a(t))i.mapSeries(t,function(t,e){t&&t(function(t){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),e.call(null,t,n)})},e);else{var n={};i.eachSeries(f(t),function(e,r){t[e](function(t){var o=Array.prototype.slice.call(arguments,1);o.length<=1&&(o=o[0]),n[e]=o,r(t)})},function(t){e(t,n)})}},i.iterator=function(t){var e=function(n){var r=function(){return t.length&&t[n].apply(null,arguments),r.next()};return r.next=function(){return n<t.length-1?e(n+1):null},r};return e(0)},i.apply=function(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e.concat(Array.prototype.slice.call(arguments)))}};var x=function(t,e,n,r){var o=[];t(e,function(t,e){n(t,function(t,n){o=o.concat(n||[]),e(t)})},function(t){r(t,o)})};i.concat=d(x),i.concatSeries=v(x),i.whilst=function(t,e,n){t()?e(function(r){return r?n(r):(i.whilst(t,e,n),void 0)}):n()},i.doWhilst=function(t,e,n){t(function(r){if(r)return n(r);var o=Array.prototype.slice.call(arguments,1);e.apply(null,o)?i.doWhilst(t,e,n):n()})},i.until=function(t,e,n){t()?n():e(function(r){return r?n(r):(i.until(t,e,n),void 0)})},i.doUntil=function(t,e,n){t(function(r){if(r)return n(r);var o=Array.prototype.slice.call(arguments,1);e.apply(null,o)?n():i.doUntil(t,e,n)})},i.queue=function(t,e){function r(t,e,n,r){return t.started||(t.started=!0),a(e)||(e=[e]),0==e.length?i.setImmediate(function(){t.drain&&t.drain()}):(u(e,function(e){var o={data:e,callback:"function"==typeof r?r:null};n?t.tasks.unshift(o):t.tasks.push(o),t.saturated&&t.tasks.length===t.concurrency&&t.saturated(),i.setImmediate(t.process)}),void 0)}void 0===e&&(e=1);var o=0,s={tasks:[],concurrency:e,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(t,e){r(s,t,!1,e)},kill:function(){s.drain=null,s.tasks=[]},unshift:function(t,e){r(s,t,!0,e)},process:function(){if(!s.paused&&o<s.concurrency&&s.tasks.length){var e=s.tasks.shift();s.empty&&0===s.tasks.length&&s.empty(),o+=1;var r=function(){o-=1,e.callback&&e.callback.apply(e,arguments),s.drain&&s.tasks.length+o===0&&s.drain(),s.process()},i=n(r);t(e.data,i)}},length:function(){return s.tasks.length},running:function(){return o},idle:function(){return s.tasks.length+o===0},pause:function(){s.paused!==!0&&(s.paused=!0,s.process())},resume:function(){s.paused!==!1&&(s.paused=!1,s.process())}};return s},i.cargo=function(t,e){var n=!1,r=[],o={tasks:r,payload:e,saturated:null,empty:null,drain:null,drained:!0,push:function(t,n){a(t)||(t=[t]),u(t,function(t){r.push({data:t,callback:"function"==typeof n?n:null}),o.drained=!1,o.saturated&&r.length===e&&o.saturated()}),i.setImmediate(o.process)},process:function s(){if(!n){if(0===r.length)return o.drain&&!o.drained&&o.drain(),o.drained=!0,void 0;var i="number"==typeof e?r.splice(0,e):r.splice(0,r.length),a=c(i,function(t){return t.data});o.empty&&o.empty(),n=!0,t(a,function(){n=!1;var t=arguments;u(i,function(e){e.callback&&e.callback.apply(null,t)}),s()})}},length:function(){return r.length},running:function(){return n}};return o};var S=function(t){return function(e){var n=Array.prototype.slice.call(arguments,1);e.apply(null,n.concat([function(e){var n=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(e?console.error&&console.error(e):console[t]&&u(n,function(e){console[t](e)}))}]))}};i.log=S("log"),i.dir=S("dir"),i.memoize=function(t,e){var n={},r={};e=e||function(t){return t};var o=function(){var o=Array.prototype.slice.call(arguments),s=o.pop(),a=e.apply(null,o);a in n?i.nextTick(function(){s.apply(null,n[a])}):a in r?r[a].push(s):(r[a]=[s],t.apply(null,o.concat([function(){n[a]=arguments;var t=r[a];delete r[a];for(var e=0,o=t.length;o>e;e++)t[e].apply(null,arguments)}])))};return o.memo=n,o.unmemoized=t,o},i.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},i.times=function(t,e,n){for(var r=[],o=0;t>o;o++)r.push(o);return i.map(r,e,n)},i.timesSeries=function(t,e,n){for(var r=[],o=0;t>o;o++)r.push(o);return i.mapSeries(r,e,n)},i.seq=function(){var t=arguments;return function(){var e=this,n=Array.prototype.slice.call(arguments),r=n.pop();i.reduce(t,n,function(t,n,r){n.apply(e,t.concat([function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);r(t,e)}]))},function(t,n){r.apply(e,[t].concat(n))})}},i.compose=function(){return i.seq.apply(null,Array.prototype.reverse.call(arguments))};var _=function(t,e){var n=function(){var n=this,r=Array.prototype.slice.call(arguments),o=r.pop();return t(e,function(t,e){t.apply(n,r.concat([e]))},o)};if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return n.apply(this,r)}return n};i.applyEach=d(_),i.applyEachSeries=v(_),i.forever=function(t,e){function n(r){if(r){if(e)return e(r);throw r}t(n)}n()},"undefined"!=typeof e&&e.exports?e.exports=i:"undefined"!=typeof define&&define.amd?define([],function(){return i}):r.async=i}()}).call(this,t("FWaASH"))},{FWaASH:22}],18:[function(t,e){!function(t,n){"undefined"!=typeof e&&e.exports?e.exports.browser=n():"function"==typeof define&&define.amd?define(n):this[t]=n()}("bowser",function(){function t(t){function n(e){var n=t.match(e);return n&&n.length>1&&n[1]||""}function r(e){var n=t.match(e);return n&&n.length>1&&n[2]||""}var o,i=n(/(ipod|iphone|ipad)/i).toLowerCase(),s=/like android/i.test(t),a=!s&&/android/i.test(t),u=n(/edge\/(\d+(\.\d+)?)/i),c=n(/version\/(\d+(\.\d+)?)/i),l=/tablet/i.test(t),f=!l&&/[^-]mobi/i.test(t);/opera|opr/i.test(t)?o={name:"Opera",opera:e,version:c||n(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/windows phone/i.test(t)?(o={name:"Windows Phone",windowsphone:e},u?(o.msedge=e,o.version=u):(o.msie=e,o.version=n(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(t)?o={name:"Internet Explorer",msie:e,version:n(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(t)?o={name:"Microsoft Edge",msedge:e,version:u}:/chrome|crios|crmo/i.test(t)?o={name:"Chrome",chrome:e,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:i?(o={name:"iphone"==i?"iPhone":"ipad"==i?"iPad":"iPod"},c&&(o.version=c)):/sailfish/i.test(t)?o={name:"Sailfish",sailfish:e,version:n(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(t)?o={name:"SeaMonkey",seamonkey:e,version:n(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(t)?(o={name:"Firefox",firefox:e,version:n(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)&&(o.firefoxos=e)):/silk/i.test(t)?o={name:"Amazon Silk",silk:e,version:n(/silk\/(\d+(\.\d+)?)/i)}:a?o={name:"Android",version:c}:/phantom/i.test(t)?o={name:"PhantomJS",phantom:e,version:n(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t)?o={name:"BlackBerry",blackberry:e,version:c||n(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:/(web|hpw)os/i.test(t)?(o={name:"WebOS",webos:e,version:c||n(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(t)&&(o.touchpad=e)):o=/bada/i.test(t)?{name:"Bada",bada:e,version:n(/dolfin\/(\d+(\.\d+)?)/i)}:/tizen/i.test(t)?{name:"Tizen",tizen:e,version:n(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||c}:/safari/i.test(t)?{name:"Safari",safari:e,version:c}:{name:n(/^(.*)\/(.*) /),version:r(/^(.*)\/(.*) /)},!o.msedge&&/(apple)?webkit/i.test(t)?(o.name=o.name||"Webkit",o.webkit=e,!o.version&&c&&(o.version=c)):!o.opera&&/gecko\//i.test(t)&&(o.name=o.name||"Gecko",o.gecko=e,o.version=o.version||n(/gecko\/(\d+(\.\d+)?)/i)),o.msedge||!a&&!o.silk?i&&(o[i]=e,o.ios=e):o.android=e;var h="";o.windowsphone?h=n(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):i?(h=n(/os (\d+([_\s]\d+)*) like mac os x/i),h=h.replace(/[_\s]/g,".")):a?h=n(/android[ \/-](\d+(\.\d+)*)/i):o.webos?h=n(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):o.blackberry?h=n(/rim\stablet\sos\s(\d+(\.\d+)*)/i):o.bada?h=n(/bada\/(\d+(\.\d+)*)/i):o.tizen&&(h=n(/tizen[\/\s](\d+(\.\d+)*)/i)),h&&(o.osversion=h);var d=h.split(".")[0];return l||"ipad"==i||a&&(3==d||4==d&&!f)||o.silk?o.tablet=e:(f||"iphone"==i||"ipod"==i||a||o.blackberry||o.webos||o.bada)&&(o.mobile=e),o.msedge||o.msie&&o.version>=10||o.chrome&&o.version>=20||o.firefox&&o.version>=20||o.safari&&o.version>=6||o.opera&&o.version>=10||o.ios&&o.osversion&&o.osversion.split(".")[0]>=6||o.blackberry&&o.version>=10.1?o.a=e:o.msie&&o.version<10||o.chrome&&o.version<20||o.firefox&&o.version<20||o.safari&&o.version<6||o.opera&&o.version<10||o.ios&&o.osversion&&o.osversion.split(".")[0]<6?o.c=e:o.x=e,o}var e=!0,n=t("undefined"!=typeof navigator?navigator.userAgent:"");return n.test=function(t){for(var e=0;e<t.length;++e){var r=t[e];if("string"==typeof r&&r in n)return!0}return!1},n._detect=t,n})},{}],19:[function(t,e,n){function r(t,e,n){if(!(this instanceof r))return new r(t,e,n);var o=typeof t;if("base64"===e&&"string"===o)for(t=k(t);t.length%4!==0;)t+="=";var i;if("number"===o)i=I(t);else if("string"===o)i=r.byteLength(t,e);else{if("object"!==o)throw new Error("First argument needs to be a number, array or string.");i=I(t.length)}var s;r._useTypedArrays?s=r._augment(new Uint8Array(i)):(s=this,s.length=i,s._isBuffer=!0);var a;if(r._useTypedArrays&&"number"==typeof t.byteLength)s._set(t);else if(L(t))for(a=0;i>a;a++)s[a]=r.isBuffer(t)?t.readUInt8(a):t[a];else if("string"===o)s.write(t,0,e);else if("number"===o&&!r._useTypedArrays&&!n)for(a=0;i>a;a++)s[a]=0;return s}function o(t,e,n,o){n=Number(n)||0;var i=t.length-n;o?(o=Number(o),o>i&&(o=i)):o=i;var s=e.length;$(s%2===0,"Invalid hex string"),o>s/2&&(o=s/2);for(var a=0;o>a;a++){var u=parseInt(e.substr(2*a,2),16);$(!isNaN(u),"Invalid hex string"),t[n+a]=u}return r._charsWritten=2*a,a}function i(t,e,n,o){var i=r._charsWritten=P(T(e),t,n,o);return i}function s(t,e,n,o){var i=r._charsWritten=P(R(e),t,n,o);return i}function a(t,e,n,r){return s(t,e,n,r)}function u(t,e,n,o){var i=r._charsWritten=P(B(e),t,n,o);return i}function c(t,e,n,o){var i=r._charsWritten=P(M(e),t,n,o);return i}function l(t,e,n){return 0===e&&n===t.length?z.fromByteArray(t):z.fromByteArray(t.slice(e,n))}function f(t,e,n){var r="",o="";n=Math.min(t.length,n);for(var i=e;n>i;i++)t[i]<=127?(r+=J(o)+String.fromCharCode(t[i]),o=""):o+="%"+t[i].toString(16);return r+J(o)}function h(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;n>o;o++)r+=String.fromCharCode(t[o]);return r}function d(t,e,n){return h(t,e,n)}function p(t,e,n){var r=t.length;(!e||0>e)&&(e=0),(!n||0>n||n>r)&&(n=r);for(var o="",i=e;n>i;i++)o+=D(t[i]);return o}function v(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function g(t,e,n,r){r||($("boolean"==typeof n,"missing or invalid endian"),$(void 0!==e&&null!==e,"missing offset"),$(e+1<t.length,"Trying to read beyond buffer length"));var o=t.length;if(!(e>=o)){var i;return n?(i=t[e],o>e+1&&(i|=t[e+1]<<8)):(i=t[e]<<8,o>e+1&&(i|=t[e+1])),i}}function y(t,e,n,r){r||($("boolean"==typeof n,"missing or invalid endian"),$(void 0!==e&&null!==e,"missing offset"),$(e+3<t.length,"Trying to read beyond buffer length"));var o=t.length;if(!(e>=o)){var i;return n?(o>e+2&&(i=t[e+2]<<16),o>e+1&&(i|=t[e+1]<<8),i|=t[e],o>e+3&&(i+=t[e+3]<<24>>>0)):(o>e+1&&(i=t[e+1]<<16),o>e+2&&(i|=t[e+2]<<8),o>e+3&&(i|=t[e+3]),i+=t[e]<<24>>>0),i}}function m(t,e,n,r){r||($("boolean"==typeof n,"missing or invalid endian"),$(void 0!==e&&null!==e,"missing offset"),$(e+1<t.length,"Trying to read beyond buffer length"));var o=t.length;if(!(e>=o)){var i=g(t,e,n,!0),s=32768&i;return s?-1*(65535-i+1):i}}function b(t,e,n,r){r||($("boolean"==typeof n,"missing or invalid endian"),$(void 0!==e&&null!==e,"missing offset"),$(e+3<t.length,"Trying to read beyond buffer length"));var o=t.length;if(!(e>=o)){var i=y(t,e,n,!0),s=2147483648&i;return s?-1*(4294967295-i+1):i}}function w(t,e,n,r){return r||($("boolean"==typeof n,"missing or invalid endian"),$(e+3<t.length,"Trying to read beyond buffer length")),V.read(t,e,n,23,4)}function E(t,e,n,r){return r||($("boolean"==typeof n,"missing or invalid endian"),$(e+7<t.length,"Trying to read beyond buffer length")),V.read(t,e,n,52,8)}function x(t,e,n,r,o){o||($(void 0!==e&&null!==e,"missing value"),$("boolean"==typeof r,"missing or invalid endian"),$(void 0!==n&&null!==n,"missing offset"),$(n+1<t.length,"trying to write beyond buffer length"),q(e,65535));var i=t.length;if(!(n>=i))for(var s=0,a=Math.min(i-n,2);a>s;s++)t[n+s]=(e&255<<8*(r?s:1-s))>>>8*(r?s:1-s)}function S(t,e,n,r,o){o||($(void 0!==e&&null!==e,"missing value"),$("boolean"==typeof r,"missing or invalid endian"),$(void 0!==n&&null!==n,"missing offset"),$(n+3<t.length,"trying to write beyond buffer length"),q(e,4294967295));var i=t.length;if(!(n>=i))for(var s=0,a=Math.min(i-n,4);a>s;s++)t[n+s]=e>>>8*(r?s:3-s)&255}function _(t,e,n,r,o){o||($(void 0!==e&&null!==e,"missing value"),$("boolean"==typeof r,"missing or invalid endian"),$(void 0!==n&&null!==n,"missing offset"),$(n+1<t.length,"Trying to write beyond buffer length"),U(e,32767,-32768));var i=t.length;n>=i||(e>=0?x(t,e,n,r,o):x(t,65535+e+1,n,r,o))}function A(t,e,n,r,o){o||($(void 0!==e&&null!==e,"missing value"),$("boolean"==typeof r,"missing or invalid endian"),$(void 0!==n&&null!==n,"missing offset"),$(n+3<t.length,"Trying to write beyond buffer length"),U(e,2147483647,-2147483648));var i=t.length;n>=i||(e>=0?S(t,e,n,r,o):S(t,4294967295+e+1,n,r,o))}function O(t,e,n,r,o){o||($(void 0!==e&&null!==e,"missing value"),$("boolean"==typeof r,"missing or invalid endian"),$(void 0!==n&&null!==n,"missing offset"),$(n+3<t.length,"Trying to write beyond buffer length"),F(e,3.4028234663852886e38,-3.4028234663852886e38));var i=t.length;
n>=i||V.write(t,e,n,r,23,4)}function N(t,e,n,r,o){o||($(void 0!==e&&null!==e,"missing value"),$("boolean"==typeof r,"missing or invalid endian"),$(void 0!==n&&null!==n,"missing offset"),$(n+7<t.length,"Trying to write beyond buffer length"),F(e,1.7976931348623157e308,-1.7976931348623157e308));var i=t.length;n>=i||V.write(t,e,n,r,52,8)}function k(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function j(t,e,n){return"number"!=typeof t?n:(t=~~t,t>=e?e:t>=0?t:(t+=e,t>=0?t:0))}function I(t){return t=~~Math.ceil(+t),0>t?0:t}function C(t){return(Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)})(t)}function L(t){return C(t)||r.isBuffer(t)||t&&"object"==typeof t&&"number"==typeof t.length}function D(t){return 16>t?"0"+t.toString(16):t.toString(16)}function T(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(127>=r)e.push(t.charCodeAt(n));else{var o=n;r>=55296&&57343>=r&&n++;for(var i=encodeURIComponent(t.slice(o,n+1)).substr(1).split("%"),s=0;s<i.length;s++)e.push(parseInt(i[s],16))}}return e}function R(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function M(t){for(var e,n,r,o=[],i=0;i<t.length;i++)e=t.charCodeAt(i),n=e>>8,r=e%256,o.push(r),o.push(n);return o}function B(t){return z.toByteArray(t)}function P(t,e,n,r){for(var o=0;r>o&&!(o+n>=e.length||o>=t.length);o++)e[o+n]=t[o];return o}function J(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}function q(t,e){$("number"==typeof t,"cannot write a non-number as a number"),$(t>=0,"specified a negative value for writing an unsigned value"),$(e>=t,"value is larger than maximum value for type"),$(Math.floor(t)===t,"value has a fractional component")}function U(t,e,n){$("number"==typeof t,"cannot write a non-number as a number"),$(e>=t,"value larger than maximum allowed value"),$(t>=n,"value smaller than minimum allowed value"),$(Math.floor(t)===t,"value has a fractional component")}function F(t,e,n){$("number"==typeof t,"cannot write a non-number as a number"),$(e>=t,"value larger than maximum allowed value"),$(t>=n,"value smaller than minimum allowed value")}function $(t,e){if(!t)throw new Error(e||"Failed assertion")}var z=t("base64-js"),V=t("ieee754");n.Buffer=r,n.SlowBuffer=r,n.INSPECT_MAX_BYTES=50,r.poolSize=8192,r._useTypedArrays=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray}catch(n){return!1}}(),r.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.isBuffer=function(t){return!(null===t||void 0===t||!t._isBuffer)},r.byteLength=function(t,e){var n;switch(t+="",e||"utf8"){case"hex":n=t.length/2;break;case"utf8":case"utf-8":n=T(t).length;break;case"ascii":case"binary":case"raw":n=t.length;break;case"base64":n=B(t).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*t.length;break;default:throw new Error("Unknown encoding")}return n},r.concat=function(t,e){if($(C(t),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===t.length)return new r(0);if(1===t.length)return t[0];var n;if("number"!=typeof e)for(e=0,n=0;n<t.length;n++)e+=t[n].length;var o=new r(e),i=0;for(n=0;n<t.length;n++){var s=t[n];s.copy(o,i),i+=s.length}return o},r.prototype.write=function(t,e,n,r){if(isFinite(e))isFinite(n)||(r=n,n=void 0);else{var l=r;r=e,e=n,n=l}e=Number(e)||0;var f=this.length-e;n?(n=Number(n),n>f&&(n=f)):n=f,r=String(r||"utf8").toLowerCase();var h;switch(r){case"hex":h=o(this,t,e,n);break;case"utf8":case"utf-8":h=i(this,t,e,n);break;case"ascii":h=s(this,t,e,n);break;case"binary":h=a(this,t,e,n);break;case"base64":h=u(this,t,e,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":h=c(this,t,e,n);break;default:throw new Error("Unknown encoding")}return h},r.prototype.toString=function(t,e,n){var r=this;if(t=String(t||"utf8").toLowerCase(),e=Number(e)||0,n=void 0!==n?Number(n):n=r.length,n===e)return"";var o;switch(t){case"hex":o=p(r,e,n);break;case"utf8":case"utf-8":o=f(r,e,n);break;case"ascii":o=h(r,e,n);break;case"binary":o=d(r,e,n);break;case"base64":o=l(r,e,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":o=v(r,e,n);break;default:throw new Error("Unknown encoding")}return o},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},r.prototype.copy=function(t,e,n,o){var i=this;if(n||(n=0),o||0===o||(o=this.length),e||(e=0),o!==n&&0!==t.length&&0!==i.length){$(o>=n,"sourceEnd < sourceStart"),$(e>=0&&e<t.length,"targetStart out of bounds"),$(n>=0&&n<i.length,"sourceStart out of bounds"),$(o>=0&&o<=i.length,"sourceEnd out of bounds"),o>this.length&&(o=this.length),t.length-e<o-n&&(o=t.length-e+n);var s=o-n;if(100>s||!r._useTypedArrays)for(var a=0;s>a;a++)t[a+e]=this[a+n];else t._set(this.subarray(n,n+s),e)}},r.prototype.slice=function(t,e){var n=this.length;if(t=j(t,n,0),e=j(e,n,n),r._useTypedArrays)return r._augment(this.subarray(t,e));for(var o=e-t,i=new r(o,void 0,!0),s=0;o>s;s++)i[s]=this[s+t];return i},r.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},r.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},r.prototype.readUInt8=function(t,e){return e||($(void 0!==t&&null!==t,"missing offset"),$(t<this.length,"Trying to read beyond buffer length")),t>=this.length?void 0:this[t]},r.prototype.readUInt16LE=function(t,e){return g(this,t,!0,e)},r.prototype.readUInt16BE=function(t,e){return g(this,t,!1,e)},r.prototype.readUInt32LE=function(t,e){return y(this,t,!0,e)},r.prototype.readUInt32BE=function(t,e){return y(this,t,!1,e)},r.prototype.readInt8=function(t,e){if(e||($(void 0!==t&&null!==t,"missing offset"),$(t<this.length,"Trying to read beyond buffer length")),!(t>=this.length)){var n=128&this[t];return n?-1*(255-this[t]+1):this[t]}},r.prototype.readInt16LE=function(t,e){return m(this,t,!0,e)},r.prototype.readInt16BE=function(t,e){return m(this,t,!1,e)},r.prototype.readInt32LE=function(t,e){return b(this,t,!0,e)},r.prototype.readInt32BE=function(t,e){return b(this,t,!1,e)},r.prototype.readFloatLE=function(t,e){return w(this,t,!0,e)},r.prototype.readFloatBE=function(t,e){return w(this,t,!1,e)},r.prototype.readDoubleLE=function(t,e){return E(this,t,!0,e)},r.prototype.readDoubleBE=function(t,e){return E(this,t,!1,e)},r.prototype.writeUInt8=function(t,e,n){n||($(void 0!==t&&null!==t,"missing value"),$(void 0!==e&&null!==e,"missing offset"),$(e<this.length,"trying to write beyond buffer length"),q(t,255)),e>=this.length||(this[e]=t)},r.prototype.writeUInt16LE=function(t,e,n){x(this,t,e,!0,n)},r.prototype.writeUInt16BE=function(t,e,n){x(this,t,e,!1,n)},r.prototype.writeUInt32LE=function(t,e,n){S(this,t,e,!0,n)},r.prototype.writeUInt32BE=function(t,e,n){S(this,t,e,!1,n)},r.prototype.writeInt8=function(t,e,n){n||($(void 0!==t&&null!==t,"missing value"),$(void 0!==e&&null!==e,"missing offset"),$(e<this.length,"Trying to write beyond buffer length"),U(t,127,-128)),e>=this.length||(t>=0?this.writeUInt8(t,e,n):this.writeUInt8(255+t+1,e,n))},r.prototype.writeInt16LE=function(t,e,n){_(this,t,e,!0,n)},r.prototype.writeInt16BE=function(t,e,n){_(this,t,e,!1,n)},r.prototype.writeInt32LE=function(t,e,n){A(this,t,e,!0,n)},r.prototype.writeInt32BE=function(t,e,n){A(this,t,e,!1,n)},r.prototype.writeFloatLE=function(t,e,n){O(this,t,e,!0,n)},r.prototype.writeFloatBE=function(t,e,n){O(this,t,e,!1,n)},r.prototype.writeDoubleLE=function(t,e,n){N(this,t,e,!0,n)},r.prototype.writeDoubleBE=function(t,e,n){N(this,t,e,!1,n)},r.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),"string"==typeof t&&(t=t.charCodeAt(0)),$("number"==typeof t&&!isNaN(t),"value is not a number"),$(n>=e,"end < start"),n!==e&&0!==this.length){$(e>=0&&e<this.length,"start out of bounds"),$(n>=0&&n<=this.length,"end out of bounds");for(var r=e;n>r;r++)this[r]=t}},r.prototype.inspect=function(){for(var t=[],e=this.length,r=0;e>r;r++)if(t[r]=D(this[r]),r===n.INSPECT_MAX_BYTES){t[r+1]="...";break}return"<Buffer "+t.join(" ")+">"},r.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(r._useTypedArrays)return new r(this).buffer;for(var t=new Uint8Array(this.length),e=0,n=t.length;n>e;e+=1)t[e]=this[e];return t.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var W=r.prototype;r._augment=function(t){return t._isBuffer=!0,t._get=t.get,t._set=t.set,t.get=W.get,t.set=W.set,t.write=W.write,t.toString=W.toString,t.toLocaleString=W.toString,t.toJSON=W.toJSON,t.copy=W.copy,t.slice=W.slice,t.readUInt8=W.readUInt8,t.readUInt16LE=W.readUInt16LE,t.readUInt16BE=W.readUInt16BE,t.readUInt32LE=W.readUInt32LE,t.readUInt32BE=W.readUInt32BE,t.readInt8=W.readInt8,t.readInt16LE=W.readInt16LE,t.readInt16BE=W.readInt16BE,t.readInt32LE=W.readInt32LE,t.readInt32BE=W.readInt32BE,t.readFloatLE=W.readFloatLE,t.readFloatBE=W.readFloatBE,t.readDoubleLE=W.readDoubleLE,t.readDoubleBE=W.readDoubleBE,t.writeUInt8=W.writeUInt8,t.writeUInt16LE=W.writeUInt16LE,t.writeUInt16BE=W.writeUInt16BE,t.writeUInt32LE=W.writeUInt32LE,t.writeUInt32BE=W.writeUInt32BE,t.writeInt8=W.writeInt8,t.writeInt16LE=W.writeInt16LE,t.writeInt16BE=W.writeInt16BE,t.writeInt32LE=W.writeInt32LE,t.writeInt32BE=W.writeInt32BE,t.writeFloatLE=W.writeFloatLE,t.writeFloatBE=W.writeFloatBE,t.writeDoubleLE=W.writeDoubleLE,t.writeDoubleBE=W.writeDoubleBE,t.fill=W.fill,t.inspect=W.inspect,t.toArrayBuffer=W.toArrayBuffer,t}},{"base64-js":20,ieee754:21}],20:[function(t,e,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===s||e===f?62:e===a||e===h?63:u>e?-1:u+10>e?e-u+26+26:l+26>e?e-l:c+26>e?e-c+26:void 0}function n(t){function n(t){c[f++]=t}var r,o,s,a,u,c;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=t.length;u="="===t.charAt(l-2)?2:"="===t.charAt(l-1)?1:0,c=new i(3*t.length/4-u),s=u>0?t.length-4:t.length;var f=0;for(r=0,o=0;s>r;r+=4,o+=3)a=e(t.charAt(r))<<18|e(t.charAt(r+1))<<12|e(t.charAt(r+2))<<6|e(t.charAt(r+3)),n((16711680&a)>>16),n((65280&a)>>8),n(255&a);return 2===u?(a=e(t.charAt(r))<<2|e(t.charAt(r+1))>>4,n(255&a)):1===u&&(a=e(t.charAt(r))<<10|e(t.charAt(r+1))<<4|e(t.charAt(r+2))>>2,n(a>>8&255),n(255&a)),c}function o(t){function e(t){return r.charAt(t)}function n(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var o,i,s,a=t.length%3,u="";for(o=0,s=t.length-a;s>o;o+=3)i=(t[o]<<16)+(t[o+1]<<8)+t[o+2],u+=n(i);switch(a){case 1:i=t[t.length-1],u+=e(i>>2),u+=e(i<<4&63),u+="==";break;case 2:i=(t[t.length-2]<<8)+t[t.length-1],u+=e(i>>10),u+=e(i>>4&63),u+=e(i<<2&63),u+="="}return u}var i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),u="0".charCodeAt(0),c="a".charCodeAt(0),l="A".charCodeAt(0),f="-".charCodeAt(0),h="_".charCodeAt(0);t.toByteArray=n,t.fromByteArray=o}("undefined"==typeof n?this.base64js={}:n)},{}],21:[function(t,e,n){n.read=function(t,e,n,r,o){var i,s,a=8*o-r-1,u=(1<<a)-1,c=u>>1,l=-7,f=n?o-1:0,h=n?-1:1,d=t[e+f];for(f+=h,i=d&(1<<-l)-1,d>>=-l,l+=a;l>0;i=256*i+t[e+f],f+=h,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=r;l>0;s=256*s+t[e+f],f+=h,l-=8);if(0===i)i=1-c;else{if(i===u)return s?0/0:1/0*(d?-1:1);s+=Math.pow(2,r),i-=c}return(d?-1:1)*s*Math.pow(2,i-r)},n.write=function(t,e,n,r,o,i){var s,a,u,c=8*i-o-1,l=(1<<c)-1,f=l>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:i-1,p=r?1:-1,v=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||1/0===e?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+f>=1?h/u:h*Math.pow(2,1-f),e*u>=2&&(s++,u/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(e*u-1)*Math.pow(2,o),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,o),s=0));o>=8;t[n+d]=255&a,d+=p,a/=256,o-=8);for(s=s<<o|a,c+=o;c>0;t[n+d]=255&s,d+=p,s/=256,c-=8);t[n+d-p]|=128*v}},{}],22:[function(t,e){function n(){}var r=e.exports={};r.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=n,r.addListener=n,r.once=n,r.off=n,r.removeListener=n,r.removeAllListeners=n,r.emit=n,r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")}},{}],23:[function(t,e){e.exports=t("./lib/chai")},{"./lib/chai":24}],24:[function(t,e,n){var r=[],n=e.exports={};n.version="1.9.2",n.AssertionError=t("assertion-error");var o=t("./chai/utils");n.use=function(t){return~r.indexOf(t)||(t(this,o),r.push(t)),this};var i=t("./chai/config");n.config=i;var s=t("./chai/assertion");n.use(s);var a=t("./chai/core/assertions");n.use(a);var u=t("./chai/interface/expect");n.use(u);var c=t("./chai/interface/should");n.use(c);var l=t("./chai/interface/assert");n.use(l)},{"./chai/assertion":25,"./chai/config":26,"./chai/core/assertions":27,"./chai/interface/assert":28,"./chai/interface/expect":29,"./chai/interface/should":30,"./chai/utils":41,"assertion-error":50}],25:[function(t,e){var n=t("./config");e.exports=function(t,e){function r(t,e,n){i(this,"ssfi",n||arguments.callee),i(this,"object",t),i(this,"message",e)}var o=t.AssertionError,i=e.flag;t.Assertion=r,Object.defineProperty(r,"includeStack",{get:function(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),n.includeStack},set:function(t){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),n.includeStack=t}}),Object.defineProperty(r,"showDiff",{get:function(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),n.showDiff},set:function(t){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),n.showDiff=t}}),r.addProperty=function(t,n){e.addProperty(this.prototype,t,n)},r.addMethod=function(t,n){e.addMethod(this.prototype,t,n)},r.addChainableMethod=function(t,n,r){e.addChainableMethod(this.prototype,t,n,r)},r.overwriteProperty=function(t,n){e.overwriteProperty(this.prototype,t,n)},r.overwriteMethod=function(t,n){e.overwriteMethod(this.prototype,t,n)},r.overwriteChainableMethod=function(t,n,r){e.overwriteChainableMethod(this.prototype,t,n,r)},r.prototype.assert=function(t,r,s,a,u,c){var l=e.test(this,arguments);if(!0!==c&&(c=!1),!0!==n.showDiff&&(c=!1),!l){var r=e.getMessage(this,arguments),f=e.getActual(this,arguments);throw new o(r,{actual:f,expected:a,showDiff:c},n.includeStack?this.assert:i(this,"ssfi"))}},Object.defineProperty(r.prototype,"_obj",{get:function(){return i(this,"object")},set:function(t){i(this,"object",t)}})}},{"./config":26}],26:[function(t,e){e.exports={includeStack:!1,showDiff:!0,truncateThreshold:40}},{}],27:[function(t,e){e.exports=function(t,e){function n(t,n){n&&w(this,"message",n),t=t.toLowerCase();var r=w(this,"object"),o=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ";this.assert(t===e.type(r),"expected #{this} to be "+o+t,"expected #{this} not to be "+o+t)}function r(){w(this,"contains",!0)}function o(t,n){n&&w(this,"message",n);var r=w(this,"object"),o=!1;if("array"===e.type(r)&&"object"===e.type(t)){for(var i in r)if(e.eql(r[i],t)){o=!0;break}}else if("object"===e.type(t)){if(!w(this,"negate")){for(var s in t)new b(r).property(s,t[s]);return}var a={};for(var s in t)a[s]=r[s];o=e.eql(a,t)}else o=r&&~r.indexOf(t);this.assert(o,"expected #{this} to include "+e.inspect(t),"expected #{this} to not include "+e.inspect(t))}function i(){var t=w(this,"object"),e=Object.prototype.toString.call(t);this.assert("[object Arguments]"===e,"expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}function s(t,e){e&&w(this,"message",e);var n=w(this,"object");return w(this,"deep")?this.eql(t):(this.assert(t===n,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0),void 0)}function a(t,n){n&&w(this,"message",n),this.assert(e.eql(t,w(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}function u(t,e){e&&w(this,"message",e);var n=w(this,"object");if(w(this,"doLength")){new b(n,e).to.have.property("length");var r=n.length;this.assert(r>t,"expected #{this} to have a length above #{exp} but got #{act}","expected #{this} to not have a length above #{exp}",t,r)}else this.assert(n>t,"expected #{this} to be above "+t,"expected #{this} to be at most "+t)}function c(t,e){e&&w(this,"message",e);var n=w(this,"object");if(w(this,"doLength")){new b(n,e).to.have.property("length");var r=n.length;this.assert(r>=t,"expected #{this} to have a length at least #{exp} but got #{act}","expected #{this} to have a length below #{exp}",t,r)}else this.assert(n>=t,"expected #{this} to be at least "+t,"expected #{this} to be below "+t)}function l(t,e){e&&w(this,"message",e);var n=w(this,"object");if(w(this,"doLength")){new b(n,e).to.have.property("length");var r=n.length;this.assert(t>r,"expected #{this} to have a length below #{exp} but got #{act}","expected #{this} to not have a length below #{exp}",t,r)}else this.assert(t>n,"expected #{this} to be below "+t,"expected #{this} to be at least "+t)}function f(t,e){e&&w(this,"message",e);var n=w(this,"object");if(w(this,"doLength")){new b(n,e).to.have.property("length");var r=n.length;this.assert(t>=r,"expected #{this} to have a length at most #{exp} but got #{act}","expected #{this} to have a length above #{exp}",t,r)}else this.assert(t>=n,"expected #{this} to be at most "+t,"expected #{this} to be above "+t)}function h(t,n){n&&w(this,"message",n);var r=e.getName(t);this.assert(w(this,"object")instanceof t,"expected #{this} to be an instance of "+r,"expected #{this} to not be an instance of "+r)}function d(t,n){n&&w(this,"message",n);var r=w(this,"object");this.assert(r.hasOwnProperty(t),"expected #{this} to have own property "+e.inspect(t),"expected #{this} to not have own property "+e.inspect(t))}function p(){w(this,"doLength",!0)}function v(t,e){e&&w(this,"message",e);var n=w(this,"object");new b(n,e).to.have.property("length");var r=n.length;this.assert(r==t,"expected #{this} to have a length of #{exp} but got #{act}","expected #{this} to not have a length of #{act}",t,r)}function g(t){var n,r=w(this,"object"),o=!0;if(t=t instanceof Array?t:Array.prototype.slice.call(arguments),!t.length)throw new Error("keys required");var i=Object.keys(r),s=t,a=t.length;if(o=t.every(function(t){return~i.indexOf(t)}),w(this,"negate")||w(this,"contains")||(o=o&&t.length==i.length),a>1){t=t.map(function(t){return e.inspect(t)});var u=t.pop();n=t.join(", ")+", and "+u}else n=e.inspect(t[0]);n=(a>1?"keys ":"key ")+n,n=(w(this,"contains")?"contain ":"have ")+n,this.assert(o,"expected #{this} to "+n,"expected #{this} to not "+n,s.sort(),i.sort(),!0)}function y(t,n,r){r&&w(this,"message",r);var o=w(this,"object");new b(o,r).is.a("function");var i=!1,s=null,a=null,u=null;0===arguments.length?(n=null,t=null):t&&(t instanceof RegExp||"string"==typeof t)?(n=t,t=null):t&&t instanceof Error?(s=t,t=null,n=null):"function"==typeof t?(a=t.prototype.name||t.name,"Error"===a&&t!==Error&&(a=(new t).name)):t=null;try{o()}catch(c){if(s)return this.assert(c===s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}",s instanceof Error?s.toString():s,c instanceof Error?c.toString():c),w(this,"object",c),this;if(t&&(this.assert(c instanceof t,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp} but #{act} was thrown",a,c instanceof Error?c.toString():c),!n))return w(this,"object",c),this;var l="object"===e.type(c)&&"message"in c?c.message:""+c;if(null!=l&&n&&n instanceof RegExp)return this.assert(n.exec(l),"expected #{this} to throw error matching #{exp} but got #{act}","expected #{this} to throw error not matching #{exp}",n,l),w(this,"object",c),this;if(null!=l&&n&&"string"==typeof n)return this.assert(~l.indexOf(n),"expected #{this} to throw error including #{exp} but got #{act}","expected #{this} to throw error not including #{act}",n,l),w(this,"object",c),this;i=!0,u=c}var f="",h=null!==a?a:s?"#{exp}":"an error";i&&(f=" but #{act} was thrown"),this.assert(i===!0,"expected #{this} to throw "+h+f,"expected #{this} to not throw "+h+f,s instanceof Error?s.toString():s,u instanceof Error?u.toString():u),w(this,"object",u)}function m(t,e,n){return t.every(function(t){return n?e.some(function(e){return n(t,e)}):-1!==e.indexOf(t)})}var b=t.Assertion,w=(Object.prototype.toString,e.flag);["to","be","been","is","and","has","have","with","that","at","of","same"].forEach(function(t){b.addProperty(t,function(){return this})}),b.addProperty("not",function(){w(this,"negate",!0)}),b.addProperty("deep",function(){w(this,"deep",!0)}),b.addChainableMethod("an",n),b.addChainableMethod("a",n),b.addChainableMethod("include",o,r),b.addChainableMethod("contain",o,r),b.addProperty("ok",function(){this.assert(w(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")}),b.addProperty("true",function(){this.assert(!0===w(this,"object"),"expected #{this} to be true","expected #{this} to be false",this.negate?!1:!0)}),b.addProperty("false",function(){this.assert(!1===w(this,"object"),"expected #{this} to be false","expected #{this} to be true",this.negate?!0:!1)}),b.addProperty("null",function(){this.assert(null===w(this,"object"),"expected #{this} to be null","expected #{this} not to be null")}),b.addProperty("undefined",function(){this.assert(void 0===w(this,"object"),"expected #{this} to be undefined","expected #{this} not to be undefined")}),b.addProperty("exist",function(){this.assert(null!=w(this,"object"),"expected #{this} to exist","expected #{this} to not exist")}),b.addProperty("empty",function(){var t=w(this,"object"),e=t;Array.isArray(t)||"string"==typeof object?e=t.length:"object"==typeof t&&(e=Object.keys(t).length),this.assert(!e,"expected #{this} to be empty","expected #{this} not to be empty")}),b.addProperty("arguments",i),b.addProperty("Arguments",i),b.addMethod("equal",s),b.addMethod("equals",s),b.addMethod("eq",s),b.addMethod("eql",a),b.addMethod("eqls",a),b.addMethod("above",u),b.addMethod("gt",u),b.addMethod("greaterThan",u),b.addMethod("least",c),b.addMethod("gte",c),b.addMethod("below",l),b.addMethod("lt",l),b.addMethod("lessThan",l),b.addMethod("most",f),b.addMethod("lte",f),b.addMethod("within",function(t,e,n){n&&w(this,"message",n);var r=w(this,"object"),o=t+".."+e;if(w(this,"doLength")){new b(r,n).to.have.property("length");var i=r.length;this.assert(i>=t&&e>=i,"expected #{this} to have a length within "+o,"expected #{this} to not have a length within "+o)}else this.assert(r>=t&&e>=r,"expected #{this} to be within "+o,"expected #{this} to not be within "+o)}),b.addMethod("instanceof",h),b.addMethod("instanceOf",h),b.addMethod("property",function(t,n,r){r&&w(this,"message",r);var o=w(this,"deep")?"deep property ":"property ",i=w(this,"negate"),s=w(this,"object"),a=w(this,"deep")?e.getPathValue(t,s):s[t];if(i&&void 0!==n){if(void 0===a)throw r=null!=r?r+": ":"",new Error(r+e.inspect(s)+" has no "+o+e.inspect(t))}else this.assert(void 0!==a,"expected #{this} to have a "+o+e.inspect(t),"expected #{this} to not have "+o+e.inspect(t));void 0!==n&&this.assert(n===a,"expected #{this} to have a "+o+e.inspect(t)+" of #{exp}, but got #{act}","expected #{this} to not have a "+o+e.inspect(t)+" of #{act}",n,a),w(this,"object",a)}),b.addMethod("ownProperty",d),b.addMethod("haveOwnProperty",d),b.addChainableMethod("length",v,p),b.addMethod("lengthOf",v),b.addMethod("match",function(t,e){e&&w(this,"message",e);var n=w(this,"object");this.assert(t.exec(n),"expected #{this} to match "+t,"expected #{this} not to match "+t)}),b.addMethod("string",function(t,n){n&&w(this,"message",n);var r=w(this,"object");new b(r,n).is.a("string"),this.assert(~r.indexOf(t),"expected #{this} to contain "+e.inspect(t),"expected #{this} to not contain "+e.inspect(t))}),b.addMethod("keys",g),b.addMethod("key",g),b.addMethod("throw",y),b.addMethod("throws",y),b.addMethod("Throw",y),b.addMethod("respondTo",function(t,n){n&&w(this,"message",n);var r=w(this,"object"),o=w(this,"itself"),i="function"!==e.type(r)||o?r[t]:r.prototype[t];this.assert("function"==typeof i,"expected #{this} to respond to "+e.inspect(t),"expected #{this} to not respond to "+e.inspect(t))}),b.addProperty("itself",function(){w(this,"itself",!0)}),b.addMethod("satisfy",function(t,n){n&&w(this,"message",n);var r=w(this,"object"),o=t(r);this.assert(o,"expected #{this} to satisfy "+e.objDisplay(t),"expected #{this} to not satisfy"+e.objDisplay(t),this.negate?!1:!0,o)}),b.addMethod("closeTo",function(t,n,r){r&&w(this,"message",r);var o=w(this,"object");if(new b(o,r).is.a("number"),"number"!==e.type(t)||"number"!==e.type(n))throw new Error("the arguments to closeTo must be numbers");this.assert(Math.abs(o-t)<=n,"expected #{this} to be close to "+t+" +/- "+n,"expected #{this} not to be close to "+t+" +/- "+n)}),b.addMethod("members",function(t,n){n&&w(this,"message",n);var r=w(this,"object");new b(r).to.be.an("array"),new b(t).to.be.an("array");var o=w(this,"deep")?e.eql:void 0;return w(this,"contains")?this.assert(m(t,r,o),"expected #{this} to be a superset of #{act}","expected #{this} to not be a superset of #{act}",r,t):(this.assert(m(r,t,o)&&m(t,r,o),"expected #{this} to have the same members as #{act}","expected #{this} to not have the same members as #{act}",r,t),void 0)})}},{}],28:[function(require,module,exports){module.exports=function(chai,util){var Assertion=chai.Assertion,flag=util.flag,assert=chai.assert=function(t,e){var n=new Assertion(null,null,chai.assert);n.assert(t,e,"[ negation message unavailable ]")};assert.fail=function(t,e,n,r){throw n=n||"assert.fail()",new chai.AssertionError(n,{actual:t,expected:e,operator:r},assert.fail)},assert.ok=function(t,e){new Assertion(t,e).is.ok},assert.notOk=function(t,e){new Assertion(t,e).is.not.ok},assert.equal=function(t,e,n){var r=new Assertion(t,n,assert.equal);r.assert(e==flag(r,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t)},assert.notEqual=function(t,e,n){var r=new Assertion(t,n,assert.notEqual);r.assert(e!=flag(r,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t)},assert.strictEqual=function(t,e,n){new Assertion(t,n).to.equal(e)},assert.notStrictEqual=function(t,e,n){new Assertion(t,n).to.not.equal(e)},assert.deepEqual=function(t,e,n){new Assertion(t,n).to.eql(e)},assert.notDeepEqual=function(t,e,n){new Assertion(t,n).to.not.eql(e)},assert.isTrue=function(t,e){new Assertion(t,e).is["true"]},assert.isFalse=function(t,e){new Assertion(t,e).is["false"]},assert.isNull=function(t,e){new Assertion(t,e).to.equal(null)},assert.isNotNull=function(t,e){new Assertion(t,e).to.not.equal(null)},assert.isUndefined=function(t,e){new Assertion(t,e).to.equal(void 0)},assert.isDefined=function(t,e){new Assertion(t,e).to.not.equal(void 0)},assert.isFunction=function(t,e){new Assertion(t,e).to.be.a("function")},assert.isNotFunction=function(t,e){new Assertion(t,e).to.not.be.a("function")},assert.isObject=function(t,e){new Assertion(t,e).to.be.a("object")},assert.isNotObject=function(t,e){new Assertion(t,e).to.not.be.a("object")},assert.isArray=function(t,e){new Assertion(t,e).to.be.an("array")},assert.isNotArray=function(t,e){new Assertion(t,e).to.not.be.an("array")},assert.isString=function(t,e){new Assertion(t,e).to.be.a("string")},assert.isNotString=function(t,e){new Assertion(t,e).to.not.be.a("string")},assert.isNumber=function(t,e){new Assertion(t,e).to.be.a("number")},assert.isNotNumber=function(t,e){new Assertion(t,e).to.not.be.a("number")},assert.isBoolean=function(t,e){new Assertion(t,e).to.be.a("boolean")},assert.isNotBoolean=function(t,e){new Assertion(t,e).to.not.be.a("boolean")},assert.typeOf=function(t,e,n){new Assertion(t,n).to.be.a(e)},assert.notTypeOf=function(t,e,n){new Assertion(t,n).to.not.be.a(e)},assert.instanceOf=function(t,e,n){new Assertion(t,n).to.be.instanceOf(e)},assert.notInstanceOf=function(t,e,n){new Assertion(t,n).to.not.be.instanceOf(e)},assert.include=function(t,e,n){new Assertion(t,n,assert.include).include(e)},assert.notInclude=function(t,e,n){new Assertion(t,n,assert.notInclude).not.include(e)},assert.match=function(t,e,n){new Assertion(t,n).to.match(e)},assert.notMatch=function(t,e,n){new Assertion(t,n).to.not.match(e)},assert.property=function(t,e,n){new Assertion(t,n).to.have.property(e)},assert.notProperty=function(t,e,n){new Assertion(t,n).to.not.have.property(e)},assert.deepProperty=function(t,e,n){new Assertion(t,n).to.have.deep.property(e)},assert.notDeepProperty=function(t,e,n){new Assertion(t,n).to.not.have.deep.property(e)},assert.propertyVal=function(t,e,n,r){new Assertion(t,r).to.have.property(e,n)},assert.propertyNotVal=function(t,e,n,r){new Assertion(t,r).to.not.have.property(e,n)},assert.deepPropertyVal=function(t,e,n,r){new Assertion(t,r).to.have.deep.property(e,n)},assert.deepPropertyNotVal=function(t,e,n,r){new Assertion(t,r).to.not.have.deep.property(e,n)},assert.lengthOf=function(t,e,n){new Assertion(t,n).to.have.length(e)},assert.Throw=function(t,e,n,r){("string"==typeof e||e instanceof RegExp)&&(n=e,e=null);var o=new Assertion(t,r).to.Throw(e,n);return flag(o,"object")},assert.doesNotThrow=function(t,e,n){"string"==typeof e&&(n=e,e=null),new Assertion(t,n).to.not.Throw(e)},assert.operator=function(val,operator,val2,msg){if(!~["==","===",">",">=","<","<=","!=","!=="].indexOf(operator))throw new Error('Invalid operator "'+operator+'"');var test=new Assertion(eval(val+operator+val2),msg);test.assert(!0===flag(test,"object"),"expected "+util.inspect(val)+" to be "+operator+" "+util.inspect(val2),"expected "+util.inspect(val)+" to not be "+operator+" "+util.inspect(val2))},assert.closeTo=function(t,e,n,r){new Assertion(t,r).to.be.closeTo(e,n)},assert.sameMembers=function(t,e,n){new Assertion(t,n).to.have.same.members(e)},assert.includeMembers=function(t,e,n){new Assertion(t,n).to.include.members(e)},assert.ifError=function(t,e){new Assertion(t,e).to.not.be.ok},function t(e,n){return assert[n]=assert[e],t}("Throw","throw")("Throw","throws")}},{}],29:[function(t,e){e.exports=function(t){t.expect=function(e,n){return new t.Assertion(e,n)}}},{}],30:[function(t,e){e.exports=function(t){function e(){function t(){return this instanceof String||this instanceof Number?new n(this.constructor(this),null,t):this instanceof Boolean?new n(1==this,null,t):new n(this,null,t)}function e(t){Object.defineProperty(this,"should",{value:t,enumerable:!0,configurable:!0,writable:!0})}Object.defineProperty(Object.prototype,"should",{set:e,get:t,configurable:!0});var r={};return r.equal=function(t,e,r){new n(t,r).to.equal(e)},r.Throw=function(t,e,r,o){new n(t,o).to.Throw(e,r)},r.exist=function(t,e){new n(t,e).to.exist},r.not={},r.not.equal=function(t,e,r){new n(t,r).to.not.equal(e)},r.not.Throw=function(t,e,r,o){new n(t,o).to.not.Throw(e,r)},r.not.exist=function(t,e){new n(t,e).to.not.exist},r["throw"]=r.Throw,r.not["throw"]=r.not.Throw,r}var n=t.Assertion;t.should=e,t.Should=e}},{}],31:[function(t,e){var n=t("./transferFlags"),r=t("./flag"),o=t("../config"),i="__proto__"in Object,s=/^(?:length|name|arguments|caller)$/,a=Function.prototype.call,u=Function.prototype.apply;e.exports=function(t,e,c,l){"function"!=typeof l&&(l=function(){});var f={method:c,chainingBehavior:l};
t.__methods||(t.__methods={}),t.__methods[e]=f,Object.defineProperty(t,e,{get:function(){f.chainingBehavior.call(this);var e=function h(){var t=r(this,"ssfi");t&&o.includeStack===!1&&r(this,"ssfi",h);var e=f.method.apply(this,arguments);return void 0===e?this:e};if(i){var c=e.__proto__=Object.create(this);c.call=a,c.apply=u}else{var l=Object.getOwnPropertyNames(t);l.forEach(function(n){if(!s.test(n)){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r)}})}return n(this,e),e},configurable:!0})}},{"../config":26,"./flag":34,"./transferFlags":48}],32:[function(t,e){var n=t("../config"),r=t("./flag");e.exports=function(t,e,o){t[e]=function(){var i=r(this,"ssfi");i&&n.includeStack===!1&&r(this,"ssfi",t[e]);var s=o.apply(this,arguments);return void 0===s?this:s}}},{"../config":26,"./flag":34}],33:[function(t,e){e.exports=function(t,e,n){Object.defineProperty(t,e,{get:function(){var t=n.call(this);return void 0===t?this:t},configurable:!0})}},{}],34:[function(t,e){e.exports=function(t,e,n){var r=t.__flags||(t.__flags=Object.create(null));return 3!==arguments.length?r[e]:(r[e]=n,void 0)}},{}],35:[function(t,e){e.exports=function(t,e){return e.length>4?e[4]:t._obj}},{}],36:[function(t,e){e.exports=function(t){var e=[];for(var n in t)e.push(n);return e}},{}],37:[function(t,e){var n=t("./flag"),r=t("./getActual"),o=(t("./inspect"),t("./objDisplay"));e.exports=function(t,e){var i=n(t,"negate"),s=n(t,"object"),a=e[3],u=r(t,e),c=i?e[2]:e[1],l=n(t,"message");return"function"==typeof c&&(c=c()),c=c||"",c=c.replace(/#{this}/g,o(s)).replace(/#{act}/g,o(u)).replace(/#{exp}/g,o(a)),l?l+": "+c:c}},{"./flag":34,"./getActual":35,"./inspect":42,"./objDisplay":43}],38:[function(t,e){e.exports=function(t){if(t.name)return t.name;var e=/^\s?function ([^(]*)\(/.exec(t);return e&&e[1]?e[1]:""}},{}],39:[function(t,e){function n(t){var e=t.replace(/\[/g,".["),n=e.match(/(\\\.|[^.]+?)+/g);return n.map(function(t){var e=/\[(\d+)\]$/,n=e.exec(t);return n?{i:parseFloat(n[1])}:{p:t}})}function r(t,e){for(var n,r=e,o=0,i=t.length;i>o;o++){var s=t[o];r?("undefined"!=typeof s.p?r=r[s.p]:"undefined"!=typeof s.i&&(r=r[s.i]),o==i-1&&(n=r)):n=void 0}return n}e.exports=function(t,e){var o=n(t);return r(o,e)}},{}],40:[function(t,e){e.exports=function(){function t(t){-1===e.indexOf(t)&&e.push(t)}for(var e=Object.getOwnPropertyNames(subject),n=Object.getPrototypeOf(subject);null!==n;)Object.getOwnPropertyNames(n).forEach(t),n=Object.getPrototypeOf(n);return e}},{}],41:[function(t,e,n){var n=e.exports={};n.test=t("./test"),n.type=t("./type"),n.getMessage=t("./getMessage"),n.getActual=t("./getActual"),n.inspect=t("./inspect"),n.objDisplay=t("./objDisplay"),n.flag=t("./flag"),n.transferFlags=t("./transferFlags"),n.eql=t("deep-eql"),n.getPathValue=t("./getPathValue"),n.getName=t("./getName"),n.addProperty=t("./addProperty"),n.addMethod=t("./addMethod"),n.overwriteProperty=t("./overwriteProperty"),n.overwriteMethod=t("./overwriteMethod"),n.addChainableMethod=t("./addChainableMethod"),n.overwriteChainableMethod=t("./overwriteChainableMethod")},{"./addChainableMethod":31,"./addMethod":32,"./addProperty":33,"./flag":34,"./getActual":35,"./getMessage":37,"./getName":38,"./getPathValue":39,"./inspect":42,"./objDisplay":43,"./overwriteChainableMethod":44,"./overwriteMethod":45,"./overwriteProperty":46,"./test":47,"./transferFlags":48,"./type":49,"deep-eql":51}],42:[function(t,e,n){function r(t,e,n){var r={showHidden:e,seen:[],stylize:function(t){return t}};return o(r,t,"undefined"==typeof n?2:n)}function o(t,e,r){if(e&&"function"==typeof e.inspect&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var p=e.inspect(r);return"string"!=typeof p&&(p=o(t,p,r)),p}var b=i(t,e);if(b)return b;if(m(e)){if("outerHTML"in e)return e.outerHTML;try{if(document.xmlVersion){var w=new XMLSerializer;return w.serializeToString(e)}var E="http://www.w3.org/1999/xhtml",x=document.createElementNS(E,"_");return x.appendChild(e.cloneNode(!1)),html=x.innerHTML.replace("><",">"+e.innerHTML+"<"),x.innerHTML="",html}catch(S){}}var _=y(e),A=t.showHidden?g(e):_;if(0===A.length||d(e)&&(1===A.length&&"stack"===A[0]||2===A.length&&"description"===A[0]&&"stack"===A[1])){if("function"==typeof e){var O=v(e),N=O?": "+O:"";return t.stylize("[Function"+N+"]","special")}if(f(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(h(e))return t.stylize(Date.prototype.toUTCString.call(e),"date");if(d(e))return s(e)}var k="",j=!1,I=["{","}"];if(l(e)&&(j=!0,I=["[","]"]),"function"==typeof e){var O=v(e),N=O?": "+O:"";k=" [Function"+N+"]"}if(f(e)&&(k=" "+RegExp.prototype.toString.call(e)),h(e)&&(k=" "+Date.prototype.toUTCString.call(e)),d(e))return s(e);if(0===A.length&&(!j||0==e.length))return I[0]+k+I[1];if(0>r)return f(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var C;return C=j?a(t,e,r,_,A):A.map(function(n){return u(t,e,r,_,n,j)}),t.seen.pop(),c(C,k,I)}function i(t,e){switch(typeof e){case"undefined":return t.stylize("undefined","undefined");case"string":var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string");case"number":return t.stylize(""+e,"number");case"boolean":return t.stylize(""+e,"boolean")}return null===e?t.stylize("null","null"):void 0}function s(t){return"["+Error.prototype.toString.call(t)+"]"}function a(t,e,n,r,o){for(var i=[],s=0,a=e.length;a>s;++s)Object.prototype.hasOwnProperty.call(e,String(s))?i.push(u(t,e,n,r,String(s),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(u(t,e,n,r,o,!0))}),i}function u(t,e,n,r,i,s){var a,u;if(e.__lookupGetter__&&(e.__lookupGetter__(i)?u=e.__lookupSetter__(i)?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):e.__lookupSetter__(i)&&(u=t.stylize("[Setter]","special"))),r.indexOf(i)<0&&(a="["+i+"]"),u||(t.seen.indexOf(e[i])<0?(u=null===n?o(t,e[i],null):o(t,e[i],n-1),u.indexOf("\n")>-1&&(u=s?u.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+u.split("\n").map(function(t){return"   "+t}).join("\n"))):u=t.stylize("[Circular]","special")),"undefined"==typeof a){if(s&&i.match(/^\d+$/))return u;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+u}function c(t,e,n){var r=0,o=t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.length+1},0);return o>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function l(t){return Array.isArray(t)||"object"==typeof t&&"[object Array]"===p(t)}function f(t){return"object"==typeof t&&"[object RegExp]"===p(t)}function h(t){return"object"==typeof t&&"[object Date]"===p(t)}function d(t){return"object"==typeof t&&"[object Error]"===p(t)}function p(t){return Object.prototype.toString.call(t)}var v=t("./getName"),g=t("./getProperties"),y=t("./getEnumerableProperties");e.exports=r;var m=function(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName}},{"./getEnumerableProperties":36,"./getName":38,"./getProperties":40}],43:[function(t,e){var n=t("./inspect"),r=t("../config");e.exports=function(t){var e=n(t),o=Object.prototype.toString.call(t);if(r.truncateThreshold&&e.length>=r.truncateThreshold){if("[object Function]"===o)return t.name&&""!==t.name?"[Function: "+t.name+"]":"[Function]";if("[object Array]"===o)return"[ Array("+t.length+") ]";if("[object Object]"===o){var i=Object.keys(t),s=i.length>2?i.splice(0,2).join(", ")+", ...":i.join(", ");return"{ Object ("+s+") }"}return e}return e}},{"../config":26,"./inspect":42}],44:[function(t,e){e.exports=function(t,e,n,r){var o=t.__methods[e],i=o.chainingBehavior;o.chainingBehavior=function(){var t=r(i).call(this);return void 0===t?this:t};var s=o.method;o.method=function(){var t=n(s).apply(this,arguments);return void 0===t?this:t}}},{}],45:[function(t,e){e.exports=function(t,e,n){var r=t[e],o=function(){return this};r&&"function"==typeof r&&(o=r),t[e]=function(){var t=n(o).apply(this,arguments);return void 0===t?this:t}}},{}],46:[function(t,e){e.exports=function(t,e,n){var r=Object.getOwnPropertyDescriptor(t,e),o=function(){};r&&"function"==typeof r.get&&(o=r.get),Object.defineProperty(t,e,{get:function(){var t=n(o).call(this);return void 0===t?this:t},configurable:!0})}},{}],47:[function(t,e){var n=t("./flag");e.exports=function(t,e){var r=n(t,"negate"),o=e[0];return r?!o:o}},{"./flag":34}],48:[function(t,e){e.exports=function(t,e,n){var r=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),n=3===arguments.length?n:!0;for(var o in r)(n||"object"!==o&&"ssfi"!==o&&"message"!=o)&&(e.__flags[o]=r[o])}},{}],49:[function(t,e){var n={"[object Arguments]":"arguments","[object Array]":"array","[object Date]":"date","[object Function]":"function","[object Number]":"number","[object RegExp]":"regexp","[object String]":"string"};e.exports=function(t){var e=Object.prototype.toString.call(t);return n[e]?n[e]:null===t?"null":void 0===t?"undefined":t===Object(t)?"object":typeof t}},{}],50:[function(t,e){function n(){function t(t,n){Object.keys(n).forEach(function(r){~e.indexOf(r)||(t[r]=n[r])})}var e=[].slice.call(arguments);return function(){for(var e=[].slice.call(arguments),n=0,r={};n<e.length;n++)t(r,e[n]);return r}}function r(t,e,r){var o=n("name","message","stack","constructor","toJSON"),i=o(e||{});this.message=t||"Unspecified AssertionError",this.showDiff=!1;for(var s in i)this[s]=i[s];r=r||arguments.callee,r&&Error.captureStackTrace&&Error.captureStackTrace(this,r)}e.exports=r,r.prototype=Object.create(Error.prototype),r.prototype.name="AssertionError",r.prototype.constructor=r,r.prototype.toJSON=function(t){var e=n("constructor","toJSON","stack"),r=e({name:this.name},this);return!1!==t&&this.stack&&(r.stack=this.stack),r}},{}],51:[function(t,e){e.exports=t("./lib/eql")},{"./lib/eql":52}],52:[function(t,e){function n(t,e,n){return r(t,e)?!0:"date"===p(t)?i(t,e):"regexp"===p(t)?s(t,e):d.isBuffer(t)?l(t,e):"arguments"===p(t)?a(t,e,n):o(t,e)?"object"!==p(t)&&"object"!==p(e)&&"array"!==p(t)&&"array"!==p(e)?r(t,e):h(t,e,n):!1}function r(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}function o(t,e){return p(t)===p(e)}function i(t,e){return"date"!==p(e)?!1:r(t.getTime(),e.getTime())}function s(t,e){return"regexp"!==p(e)?!1:r(t.toString(),e.toString())}function a(t,e,r){return"arguments"!==p(e)?!1:(t=[].slice.call(t),e=[].slice.call(e),n(t,e,r))}function u(t){var e=[];for(var n in t)e.push(n);return e}function c(t,e){if(t.length!==e.length)return!1;for(var n=0,r=!0;n<t.length;n++)if(t[n]!==e[n]){r=!1;break}return r}function l(t,e){return d.isBuffer(e)?c(t,e):!1}function f(t){return null!==t&&void 0!==t}function h(t,e,r){if(!f(t)||!f(e))return!1;if(t.prototype!==e.prototype)return!1;var o;if(r){for(o=0;o<r.length;o++)if(r[o][0]===t&&r[o][1]===e||r[o][0]===e&&r[o][1]===t)return!0}else r=[];try{var i=u(t),s=u(e)}catch(a){return!1}if(i.sort(),s.sort(),!c(i,s))return!1;r.push([t,e]);var l;for(o=i.length-1;o>=0;o--)if(l=i[o],!n(t[l],e[l],r))return!1;return!0}var d,p=t("type-detect");try{d=t("buffer").Buffer}catch(v){d={},d.isBuffer=function(){return!1}}e.exports=n},{buffer:19,"type-detect":53}],53:[function(t,e){e.exports=t("./lib/type")},{"./lib/type":54}],54:[function(t,e,n){function r(t){var e=Object.prototype.toString.call(t);return i[e]?i[e]:null===t?"null":void 0===t?"undefined":t===Object(t)?"object":typeof t}function o(){this.tests={}}var n=e.exports=r,i={"[object Array]":"array","[object RegExp]":"regexp","[object Function]":"function","[object Arguments]":"arguments","[object Date]":"date"};n.Library=o,o.prototype.of=r,o.prototype.define=function(t,e){return 1===arguments.length?this.tests[t]:(this.tests[t]=e,this)},o.prototype.test=function(t,e){if(e===r(t))return!0;var n=this.tests[e];if(n&&"regexp"===r(n))return n.test(t);if(n&&"function"===r(n))return n(t);throw new ReferenceError('Type test "'+e+'" not defined or invalid.')}},{}],55:[function(t,e){!function(t,n,r){"function"==typeof define?define(n):"undefined"!=typeof e&&e.exports?e.exports=n():r[t]=n()}("IDBStore",function(){"use strict";var t=function(t){throw t},e=function(){},n={storeName:"Store",storePrefix:"IDBWrapper-",dbVersion:1,keyPath:"id",autoIncrement:!0,onStoreReady:function(){},onError:t,indexes:[]},r=function(t,e){"undefined"==typeof e&&"function"==typeof t&&(e=t),"[object Object]"!=Object.prototype.toString.call(t)&&(t={});for(var r in n)this[r]="undefined"!=typeof t[r]?t[r]:n[r];this.dbName=this.storePrefix+this.storeName,this.dbVersion=parseInt(this.dbVersion,10)||1,e&&(this.onStoreReady=e);var o="object"==typeof window?window:self;this.idb=o.indexedDB||o.webkitIndexedDB||o.mozIndexedDB||o.shimIndexedDB,this.keyRange=o.IDBKeyRange||o.webkitIDBKeyRange||o.mozIDBKeyRange,this.features={hasAutoIncrement:!o.mozIndexedDB},this.consts={READ_ONLY:"readonly",READ_WRITE:"readwrite",VERSION_CHANGE:"versionchange",NEXT:"next",NEXT_NO_DUPLICATE:"nextunique",PREV:"prev",PREV_NO_DUPLICATE:"prevunique"},this.openDB()};r.prototype={constructor:r,version:"1.5",db:null,dbName:null,dbVersion:null,store:null,storeName:null,storePrefix:null,keyPath:null,autoIncrement:null,indexes:null,features:null,onStoreReady:null,onError:null,_insertIdCount:0,openDB:function(){var t=this.idb.open(this.dbName,this.dbVersion),e=!1;t.onerror=function(t){var e=!1;"error"in t.target?e="VersionError"==t.target.error.name:"errorCode"in t.target&&(e=12==t.target.errorCode),e?this.onError(new Error("The version number provided is lower than the existing one.")):this.onError(t)}.bind(this),t.onsuccess=function(t){if(!e){if(this.db)return this.onStoreReady(),void 0;if(this.db=t.target.result,"string"==typeof this.db.version)return this.onError(new Error("The IndexedDB implementation in this browser is outdated. Please upgrade your browser.")),void 0;if(!this.db.objectStoreNames.contains(this.storeName))return this.onError(new Error("Something is wrong with the IndexedDB implementation in this browser. Please upgrade your browser.")),void 0;var n=this.db.transaction([this.storeName],this.consts.READ_ONLY);this.store=n.objectStore(this.storeName);var r=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach(function(t){var n=t.name;if(!n)return e=!0,this.onError(new Error("Cannot create index: No index name given.")),void 0;if(this.normalizeIndexData(t),this.hasIndex(n)){var o=this.store.index(n),i=this.indexComplies(o,t);i||(e=!0,this.onError(new Error('Cannot modify index "'+n+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),r.splice(r.indexOf(n),1)}else e=!0,this.onError(new Error('Cannot create new index "'+n+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))},this),r.length&&(e=!0,this.onError(new Error('Cannot delete index(es) "'+r.toString()+'" for current version. Please bump version number to '+(this.dbVersion+1)+"."))),e||this.onStoreReady()}}.bind(this),t.onupgradeneeded=function(t){if(this.db=t.target.result,this.db.objectStoreNames.contains(this.storeName))this.store=t.target.transaction.objectStore(this.storeName);else{var n={autoIncrement:this.autoIncrement};null!==this.keyPath&&(n.keyPath=this.keyPath),this.store=this.db.createObjectStore(this.storeName,n)}var r=Array.prototype.slice.call(this.getIndexList());this.indexes.forEach(function(t){var n=t.name;if(n||(e=!0,this.onError(new Error("Cannot create index: No index name given."))),this.normalizeIndexData(t),this.hasIndex(n)){var o=this.store.index(n),i=this.indexComplies(o,t);i||(this.store.deleteIndex(n),this.store.createIndex(n,t.keyPath,{unique:t.unique,multiEntry:t.multiEntry})),r.splice(r.indexOf(n),1)}else this.store.createIndex(n,t.keyPath,{unique:t.unique,multiEntry:t.multiEntry})},this),r.length&&r.forEach(function(t){this.store.deleteIndex(t)},this)}.bind(this)},deleteDatabase:function(t,e){if(this.idb.deleteDatabase){this.db.close();var n=this.idb.deleteDatabase(this.dbName);n.onsuccess=t,n.onerror=e}else e(new Error("Browser does not support IndexedDB deleteDatabase!"))},put:function(n,r,o,i){null!==this.keyPath&&(i=o,o=r,r=n),i||(i=t),o||(o=e);var s,a=!1,u=null,c=this.db.transaction([this.storeName],this.consts.READ_WRITE);return c.oncomplete=function(){var t=a?o:i;t(u)},c.onabort=i,c.onerror=i,null!==this.keyPath?(this._addIdPropertyIfNeeded(r),s=c.objectStore(this.storeName).put(r)):s=c.objectStore(this.storeName).put(r,n),s.onsuccess=function(t){a=!0,u=t.target.result},s.onerror=i,c},get:function(n,r,o){o||(o=t),r||(r=e);var i=!1,s=null,a=this.db.transaction([this.storeName],this.consts.READ_ONLY);a.oncomplete=function(){var t=i?r:o;t(s)},a.onabort=o,a.onerror=o;var u=a.objectStore(this.storeName).get(n);return u.onsuccess=function(t){i=!0,s=t.target.result},u.onerror=o,a},remove:function(n,r,o){o||(o=t),r||(r=e);var i=!1,s=null,a=this.db.transaction([this.storeName],this.consts.READ_WRITE);a.oncomplete=function(){var t=i?r:o;t(s)},a.onabort=o,a.onerror=o;var u=a.objectStore(this.storeName)["delete"](n);return u.onsuccess=function(t){i=!0,s=t.target.result},u.onerror=o,a},batch:function(n,r,o){o||(o=t),r||(r=e),"[object Array]"!=Object.prototype.toString.call(n)&&o(new Error("dataArray argument must be of type Array."));var i=this.db.transaction([this.storeName],this.consts.READ_WRITE);i.oncomplete=function(){var t=u?r:o;t(u)},i.onabort=o,i.onerror=o;var s=n.length,a=!1,u=!1,c=function(){s--,0!==s||a||(a=!0,u=!0)};return n.forEach(function(t){var e=t.type,n=t.key,r=t.value,s=function(t){i.abort(),a||(a=!0,o(t,e,n))};if("remove"==e){var u=i.objectStore(this.storeName)["delete"](n);u.onsuccess=c,u.onerror=s}else if("put"==e){var l;null!==this.keyPath?(this._addIdPropertyIfNeeded(r),l=i.objectStore(this.storeName).put(r)):l=i.objectStore(this.storeName).put(r,n),l.onsuccess=c,l.onerror=s}},this),i},putBatch:function(t,e,n){var r=t.map(function(t){return{type:"put",value:t}});return this.batch(r,e,n)},upsertBatch:function(n,r,o,i){"function"==typeof r&&(o=r,i=o,r={}),i||(i=t),o||(o=e),r||(r={}),"[object Array]"!=Object.prototype.toString.call(n)&&i(new Error("dataArray argument must be of type Array."));var s=this.db.transaction([this.storeName],this.consts.READ_WRITE);s.oncomplete=function(){l?o(n):i(!1)},s.onabort=i,s.onerror=i;var a=r.keyField||this.keyPath,u=n.length,c=!1,l=!1,f=0,h=function(t){var e=n[f++];e[a]=t.target.result,u--,0!==u||c||(c=!0,l=!0)};return n.forEach(function(t){var e,n=t.key,r=function(t){s.abort(),c||(c=!0,i(t))};null!==this.keyPath?(this._addIdPropertyIfNeeded(t),e=s.objectStore(this.storeName).put(t)):e=s.objectStore(this.storeName).put(t,n),e.onsuccess=h,e.onerror=r},this),s},removeBatch:function(t,e,n){var r=t.map(function(t){return{type:"remove",key:t}});return this.batch(r,e,n)},getBatch:function(n,r,o,i){o||(o=t),r||(r=e),i||(i="sparse"),"[object Array]"!=Object.prototype.toString.call(n)&&o(new Error("keyArray argument must be of type Array."));var s=this.db.transaction([this.storeName],this.consts.READ_ONLY);s.oncomplete=function(){var t=l?r:o;t(f)},s.onabort=o,s.onerror=o;var a=[],u=n.length,c=!1,l=!1,f=null,h=function(t){t.target.result||"dense"==i?a.push(t.target.result):"sparse"==i&&a.length++,u--,0===u&&(c=!0,l=!0,f=a)};return n.forEach(function(t){var e=function(t){c=!0,f=t,o(t),s.abort()},n=s.objectStore(this.storeName).get(t);n.onsuccess=h,n.onerror=e},this),s},getAll:function(n,r){r||(r=t),n||(n=e);var o=this.db.transaction([this.storeName],this.consts.READ_ONLY),i=o.objectStore(this.storeName);return i.getAll?this._getAllNative(o,i,n,r):this._getAllCursor(o,i,n,r),o},_getAllNative:function(t,e,n,r){var o=!1,i=null;t.oncomplete=function(){var t=o?n:r;t(i)},t.onabort=r,t.onerror=r;var s=e.getAll();s.onsuccess=function(t){o=!0,i=t.target.result},s.onerror=r},_getAllCursor:function(t,e,n,r){var o=[],i=!1,s=null;t.oncomplete=function(){var t=i?n:r;t(s)},t.onabort=r,t.onerror=r;var a=e.openCursor();a.onsuccess=function(t){var e=t.target.result;e?(o.push(e.value),e["continue"]()):(i=!0,s=o)},a.onError=r},clear:function(n,r){r||(r=t),n||(n=e);var o=!1,i=null,s=this.db.transaction([this.storeName],this.consts.READ_WRITE);s.oncomplete=function(){var t=o?n:r;t(i)},s.onabort=r,s.onerror=r;var a=s.objectStore(this.storeName).clear();return a.onsuccess=function(t){o=!0,i=t.target.result},a.onerror=r,s},_addIdPropertyIfNeeded:function(t){this.features.hasAutoIncrement||"undefined"!=typeof t[this.keyPath]||(t[this.keyPath]=this._insertIdCount++ +Date.now())},getIndexList:function(){return this.store.indexNames},hasIndex:function(t){return this.store.indexNames.contains(t)},normalizeIndexData:function(t){t.keyPath=t.keyPath||t.name,t.unique=!!t.unique,t.multiEntry=!!t.multiEntry},indexComplies:function(t,e){var n=["keyPath","unique","multiEntry"].every(function(n){if("multiEntry"==n&&void 0===t[n]&&e[n]===!1)return!0;if("keyPath"==n&&"[object Array]"==Object.prototype.toString.call(e[n])){var r=e.keyPath,o=t.keyPath;if("string"==typeof o)return r.toString()==o;if("function"!=typeof o.contains&&"function"!=typeof o.indexOf)return!1;if(o.length!==r.length)return!1;for(var i=0,s=r.length;s>i;i++)if(!(o.contains&&o.contains(r[i])||o.indexOf(-1!==r[i])))return!1;return!0}return e[n]==t[n]});return n},iterate:function(e,n){n=i({index:null,order:"ASC",autoContinue:!0,filterDuplicates:!1,keyRange:null,writeAccess:!1,onEnd:null,onError:t,limit:1/0,offset:0},n||{});var r="desc"==n.order.toLowerCase()?"PREV":"NEXT";n.filterDuplicates&&(r+="_NO_DUPLICATE");var o=!1,s=this.db.transaction([this.storeName],this.consts[n.writeAccess?"READ_WRITE":"READ_ONLY"]),a=s.objectStore(this.storeName);n.index&&(a=a.index(n.index));var u=0;s.oncomplete=function(){return o?(n.onEnd?n.onEnd():e(null),void 0):(n.onError(null),void 0)},s.onabort=n.onError,s.onerror=n.onError;var c=a.openCursor(n.keyRange,this.consts[r]);return c.onerror=n.onError,c.onsuccess=function(t){var r=t.target.result;r?n.offset?(r.advance(n.offset),n.offset=0):(e(r.value,r,s),u++,n.autoContinue&&(u+n.offset<n.limit?r["continue"]():o=!0)):o=!0},s},query:function(t,e){var n=[];return e=e||{},e.autoContinue=!0,e.writeAccess=!1,e.onEnd=function(){t(n)},this.iterate(function(t){n.push(t)},e)},count:function(e,n){n=i({index:null,keyRange:null},n||{});var r=n.onError||t,o=!1,s=null,a=this.db.transaction([this.storeName],this.consts.READ_ONLY);a.oncomplete=function(){var t=o?e:r;t(s)},a.onabort=r,a.onerror=r;var u=a.objectStore(this.storeName);n.index&&(u=u.index(n.index));var c=u.count(n.keyRange);return c.onsuccess=function(t){o=!0,s=t.target.result},c.onError=r,a},makeKeyRange:function(t){var e,n="undefined"!=typeof t.lower,r="undefined"!=typeof t.upper,o="undefined"!=typeof t.only;switch(!0){case o:e=this.keyRange.only(t.only);break;case n&&r:e=this.keyRange.bound(t.lower,t.upper,t.excludeLower,t.excludeUpper);break;case n:e=this.keyRange.lowerBound(t.lower,t.excludeLower);break;case r:e=this.keyRange.upperBound(t.upper,t.excludeUpper);break;default:throw new Error('Cannot create KeyRange. Provide one or both of "lower" or "upper" value, or an "only" value.')}return e}};var o={},i=function(t,e){var n,r;for(n in e)r=e[n],r!==o[n]&&r!==t[n]&&(t[n]=r);return t};return r.version=r.prototype.version,r},this)},{}],56:[function(t,e){function n(){var t=0;"object"!=typeof arguments[0]&&null!=arguments[0]?(this.key=arguments[0],t=1):this.key="id",this.array=[];for(var e=arguments.length;e>t;)this.insert(arguments[t++])}"object"==typeof e&&(e.exports=n),n.prototype.insert=function(t){var e=this.array,n=e.length;for(e.push(t);n;){var r=n,o=--n;if(this.getKey(r)<this.getKey(o)){var i=e[r];e[r]=e[o],e[o]=i}}return this},n.prototype.getKey=function(t){return this.array[t][this.key]},n.prototype.search=function(t){for(var e="object"==typeof t?t[this.key]:t,n=0,r=this.array,o=r.length;o>n;){var i=(o+n)/2>>>0,s=this.getKey(i);if(e>s)n=i+1;else{if(!(s>e))return i;o=i}}return-1},n.prototype.remove=function(t){var e=this.search(t);return e>=0&&this.array.splice(e,1),this}},{}]},{},[]);